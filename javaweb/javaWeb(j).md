## 1 ã€åŸºæœ¬æ¦‚å¿µ

### 1.1ã€å‰è¨€

webå¼€å‘ï¼š

webï¼Œç½‘é¡µçš„æ„æ€ï¼Œwww.baidu.com

é™æ€web

html,css

æä¾›ç»™æ‰€æœ‰äººçœ‹çš„æ•°æ®å§‹ç»ˆä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼

åŠ¨æ€web

æ·˜å®ï¼Œå‡ ä¹æ˜¯æ‰€æœ‰çš„ç½‘ç«™ï¼›

æä¾›ç»™æ‰€æœ‰äººçœ‹çš„æ•°æ®å§‹ç»ˆä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ¯ä¸ªäººåœ¨ä¸åŒçš„æ—¶é—´ï¼Œä¸åŒçš„åœ°ç‚¹çœ‹åˆ°çš„ä¿¡æ¯å„ä¸ç›¸åŒï¼

æŠ€æœ¯æ ˆï¼šServlet/JSPï¼ŒASPï¼ŒPHP

### 1.2ã€webåº”ç”¨ç¨‹åºwebåº”ç”¨ç¨‹åºï¼š

å¯ä»¥æä¾›æµè§ˆå™¨è®¿é—®çš„ç¨‹åºï¼›

- a.htmlã€b.html.....å¤šä¸ªwebèµ„æºï¼Œè¿™äº›webèµ„æºå¯ä»¥è¢«å¤–ç•Œè®¿é—®ï¼Œå¯¹å¤–ç•Œæä¾›æœåŠ¡ï¼›
- ä½ ä»¬èƒ½è®¿é—®åˆ°çš„ä»»ä½•ä¸€ä¸ªé¡µé¢æˆ–è€…èµ„æºï¼Œéƒ½å­˜åœ¨äºè¿™ä¸ªä¸–ç•Œçš„æŸä¸€ä¸ªè§’è½çš„è®¡ç®—æœºä¸Šã€‚
- URL
- è¿™ä¸ªç»Ÿä¸€çš„webèµ„æºä¼šè¢«æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œwebåº”ç”¨ç¨‹åº>Tomcatï¼šæœåŠ¡å™¨
- ä¸€ä¸ªwebåº”ç”¨ç”±å¤šéƒ¨åˆ†ç»„æˆï¼ˆé™æ€webï¼ŒåŠ¨æ€web)
  - html,css,js
  - jsp,servlet
  - Javaç¨‹åº
  - jaråŒ…
  - é…ç½®æ–‡ä»¶ï¼ˆProperties)

Webä½¿ç”¨ç¨‹åºç¼–å†™å®Œæ¯•åï¼Œè‹¥æƒ³æä¾›ç»™å¤–ç•Œè®¿é—®ï¼›éœ€è¦ä¸€ä¸ªæœåŠ¡å™¨æ¥ç»Ÿä¸€ç®¡ç†ã€‚

### 1.3ã€é™æ€web

- *.htmï¼Œ *.htmlè¿™äº›éƒ½æ˜¯ç½‘å‘˜çš„åå¢ƒã€å¦‚æœæœåŠ¡å™¨ä¸Šä¸€ç›´å­˜åœ¨è¿™äº›ä¸œå››ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è¿›è¡Œè¯»å–ã€éœ€è¦ç½‘ç»œï¼›

![é™æ€web](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231116409-2120520000.png)

- é™æ€webå­˜åœ¨çš„ç¼ºç‚¹
- Webé¡µé¢æ— æ³•åŠ¨æ€æ›´æ–°ï¼Œæ‰€æœ‰ç”¨æˆ·çœ‹åˆ°éƒ½æ˜¯åŒä¸€ä¸ªé¡µé¢
  - è½®æ’­å›¾ï¼Œç‚¹å‡»ç‰¹æ•ˆï¼šä¼ªåŠ¨æ€
  - JavaScript[å®é™…å¼€å‘ä¸­ï¼Œå®ƒç”¨çš„æœ€å¤š]
  - VBScript

å®ƒæ— æ³•å’Œæ•°æ®åº“äº¤äº’ï¼ˆæ•°æ®æ— æ³•æŒä¹…åŒ–ï¼Œç”¨æˆ·æ— æ³•äº¤äº’ï¼‰

### 1.4ã€ åŠ¨æ€web

é¡µé¢ä¼šåŠ¨æ€å±•ç¤ºï¼Œâ€œwebé¡µé¢çš„å±•ç¤ºæ•ˆæœå› äººè€Œå¼‚â€ï¼Œçœ‹ä¸ªäºº

![åŠ¨æ€web](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231116156-1254113150.png)

ç¼ºç‚¹ï¼š

- åŠ å…¥æœåŠ¡å™¨çš„åŠ¨æ€webèµ„æºå‡ºç°äº†é”™è¯¯ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°ç¼–å†™æˆ‘ä»¬çš„åå°ç¨‹åºï¼Œé‡æ–°å‘å¸ƒï¼›
  - åœæœºç»´æŠ¤ä¼˜ç‚¹ï¼š
- Webé¡µé¢å¯ä»¥åŠ¨æ€æ›´æ–°ï¼Œæ‰€æœ‰ç”¨æˆ·çœ‹åˆ°éƒ½ä¸æ˜¯åŒä¸€ä¸ªé¡µé¢
- å®ƒå¯ä»¥ä¸æ•°æ®åº“äº¤äº’ï¼ˆæ•°æ®æŒä¹…åŒ–ï¼šæ³¨å†Œï¼Œå•†å“ä¿¡æ¯ï¼Œç”¨æˆ·ä¿¡æ¯........ï¼‰
- ![åŠ¨æ€web2](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231115927-201764454.png)

## 2 ã€webæœåŠ¡å™¨

### 2.1ã€æŠ€æœ¯è®²è§£

##### ASP:

- å¾®è½¯ï¼šå›½å†…æœ€æ—©æµè¡Œçš„å°±æ˜¯ASPï¼›
- åœ¨HTMLä¸­åµŒå…¥äº†VBçš„è„šæœ¬ï¼ŒASP+COMï¼›
- åœ¨ASPå¼€å‘ä¸­ï¼ŒåŸºæœ¬ä¸€ä¸ªé¡µé¢éƒ½æœ‰å‡ å¹²è¡Œçš„ä¸šåŠ¡ä»£ç ï¼Œé¡µé¢æå…¶æ¢ä¹±ï¼›
- ç»´æŠ¤æˆæœ¬é«˜ï¼
- C#
- IIS

##### php:

- PHPå¼€å‘é€Ÿåº¦å¾ˆå¿«ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œè·¨å¹³å°ï¼Œä»£ç å¾ˆç®€å•ï¼ˆ70%ï¼ŒWPï¼‰ï¼›
- æ— æ³•æ‰¿è½½å¤§è®¿é—®é‡çš„æƒ…å†µï¼ˆå±€é™æ€§ï¼‰ï¼›

##### jSP/Servlet:

B/Sï¼›æµè§ˆå’ŒæœåŠ¡å™¨C/Sï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨

- sunå…¬å¸ä¸»æ¨çš„B/Sæ¶æ„
- åŸºäºJavaè¯­è¨€çš„ï¼ˆæ‰€æœ‰çš„å¤§å…¬å¸ï¼Œæˆ–è€…ä¸€äº›å¼€æºçš„ç»„ä»¶ï¼Œéƒ½æ˜¯ç”¨Javaå†™çš„ï¼‰ï¼›
- å¯ä»¥æ‰¿è½½ä¸‰é«˜é—®é¢˜å¸¦æ¥çš„å½±å“ï¼›ï¼ˆé«˜å¹¶å‘ï¼Œé«˜å¯ç”¨ã€‚é«˜æ€§èƒ½ï¼‰
- è¯­æ³•åƒASPï¼ŒASP->JSPï¼ŒåŠ å¼ºå¸‚åœºå¼ºåº¦ï¼›

### 2.2ã€webæœåŠ¡å™¨

æœåŠ¡å™¨æ˜¯ä¸€ç§è¢«åŠ¨çš„æ“ä½œï¼Œç”¨æ¥å¤„ç†ç”¨æˆ·çš„ä¸€äº›è¯·æ±‚å’Œç»™ç”¨æˆ·ä¸€äº›å“åº”ä¿¡æ¯ï¼›

lIS

å¾®è½¯çš„ï¼›ASP.,Windowsä¸­è‡ªå¸¦çš„

Tomcat

![TomcatLogo](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231115738-1579938947.png)

é¢å‘ç™¾åº¦ç¼–ç¨‹ï¼š

Tomcatæ˜¯Apache è½¯ä»¶åŸºé‡‘ä¼šï¼ˆApache Software Foundation)çš„jakartaé¡¹ç›®ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒé¡¹ç›®ï¼Œæœ€

æ–°çš„Servlet å’ŒJSP è§„èŒƒæ€»æ˜¯èƒ½åœ¨Tomcatä¸­å¾—åˆ°ä½“ç°ï¼Œå› ä¸ºTomcat æŠ€æœ¯å…ˆè¿›ã€æ€§èƒ½ç¨³å®šï¼Œè€Œä¸”å…è´¹ï¼Œ

å› è€Œæ·±å—lavaçˆ±å¥½è€…çš„å–œçˆ±å¹¶å¾—åˆ°äº†éƒ¨åˆ†è½¯ä»¶å¼€å‘å•†çš„è®¤å¯ï¼Œæˆä¸ºç›®å‰æ¯”è¾ƒæµè¡Œçš„Webåº”ç”¨æœåŠ¡å™¨ã€‚

Tomcat æœåŠ¡å™¨æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æ”¾æºä»£ç çš„Webåº”ç”¨æœåŠ¡å™¨ï¼Œå±äºè½»é‡çº§åº”ç”¨æœåŠ¡å™¨ï¼Œåœ¨ä¸­å°å‹ç³»ç»Ÿå’Œ

å¹¶å‘è®¿é—®ç”¨æˆ·ä¸æ˜¯å¾ˆå¤šçš„åœºåˆä¸‹è¢«æ™®éä½¿ç”¨ï¼Œæ˜¯å¼€å‘å’Œè°ƒè¯•JSPç¨‹åºçš„é¦–é€‰ã€‚å¯¹äºä¸€ä¸ªJavaåˆå­¦webçš„äºº

æ¥è¯´ï¼Œå®ƒæ˜¯æœ€ä½³çš„é€‰æ‹©ã€‚

Tomcat å®é™…ä¸Šè¿è¡ŒJSPé¡µé¢å’ŒSerletã€‚Tornctæœ€æ–°ç‰ˆå·²ç»æ›´æ–°åˆ°äº†10

å·¥ä½œ3-5å¹´ä¹‹åï¼Œå¯ä»¥å°è¯•æ‰‹å†™TomcatæœåŠ¡å™¨ï¼›

ä¸‹è½½tomcatï¼š

1. å®‰è£…orè§£å‹
2. äº†è§£é…ç½®æ–‡ä»¶åŠç›®å½•ç»“æ„
3. äº†è§£è¿™ä¸ªä¸œè¥¿çš„ä½œç”¨

## 3 ã€Tomcat

å®‰è£…ä¹‹å‰è¦çŸ¥é“

1. ç¡®å®šè‡ªå·±Javaç¯å¢ƒå˜é‡æ˜¯å¦å®‰è£…å¥½,JDKå’ŒJREéƒ½éœ€è¦é…ç½®ç¯å¢ƒå˜é‡
2. åœ¨ä¸‹è½½ä¹‹å‰çœ‹å¥½è‡ªå·±jdkçš„ç‰ˆæœ¬æ¥é€‰æ‹©ï¼Œå¹¶ä¸æ˜¯æœ€é«˜çš„ç‰ˆæœ¬ä»–å°±æ˜¯æœ€å¥½çš„ï¼Œçœ‹ä¸‹é¢è¿™é‡Œ

![tomcatç‰ˆæœ¬](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231115474-265516951.png)

### 3.1å®‰è£…tomcat

å®˜ç½‘ï¼šhttps://tomcat.apache.org/

![tomcatå®‰è£…](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231115079-336189952.png)

![è§£å‹1](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231114721-513630865.png)

### 3.2ã€Tomcatå¯åŠ¨å’Œé…ç½®

æ–‡ä»¶å¤¹ä½œç”¨:

![æ–‡ä»¶ä½œç”¨](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231114447-232345662.png)

å¯åŠ¨å’Œå…³é—­Tomcat

![å¯åŠ¨å…³é—­](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231114184-705900978.png)

è®¿é—®æµ‹è¯•ï¼šhttp://localhost:8080/

å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼š

1. Javaç¯å¢ƒå˜é‡æ²¡æœ‰é…ç½®
2. é—ªé€€é—®é¢˜ï¼šéœ€è¦é…ç½®å…¼å®¹æ€§ï¼Œå¯èƒ½æ²¡é…ç½®å¥½Javaç¯å¢ƒå˜é‡
3. ä¹±ç é—®é¢˜ï¼šé…ç½®æ–‡ä»¶ä¸­è®¾ç½®

```xml
å¯ä»¥ä¿®æ”¹ conf/logging.properties ä¸­çš„:java.util.logging.ConsoleHandler.encoding = GBK è§£å†³ä¹±ç ,ä½†ä¸å»ºè®®ï¼Œå¦‚æœä½ æ”¹å˜äº†ï¼Œåœ¨ä½¿ç”¨ç¼–è¾‘å™¨çš„æ—¶å€™ç¼–è¾‘å™¨å¯èƒ½ä¼šå‡ºç°é—®é¢˜
```

### 3.3ã€é…ç½®

![conf](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231113926-1842585040.png)

å¯ä»¥é…ç½®å¯åŠ¨çš„ç«¯å£å·

- tomcatçš„é»˜è®¤ç«¯å£å·ä¸ºï¼š 8080
- mysql: 3306
- http: 80
- httpsï¼š 443

```java
<Connector port="8080" protocol="HTTP/1.1"
      connectionTimeout="20000"
      redirectPort="8443" />
```

å¯ä»¥é…ç½®ä¸»æœºçš„åç§°

- é»˜è®¤çš„ä¸»æœºåä¸ºï¼šlocalhost->127.0.0.
- é»˜è®¤ç½‘ç«™åº”ç”¨å­˜æ”¾çš„ä½ç½®ä¸ºï¼šwebapps

```java
  <Host name="www.clear.com"  appBase="webapps"
        unpackWARs="true" autoDeploy="true">
```

é«˜éš¾åº¦é¢è¯•é¢˜ï¼š

è¯·ä½ è°ˆè°ˆç½‘ç«™æ˜¯å¦‚ä½•è¿›è¡Œè®¿é—®çš„ï¼

1. è¾“å…¥ä¸€ä¸ªåŸŸåï¼›å›è½¦

2. æ£€æŸ¥æœ¬æœºçš„C:\Windows\System32\drivers\etc\hostsé…ç½®æ–‡ä»¶ä¸‹æœ‰æ²¡æœ‰è¿™ä¸ªåŸŸåæ˜ å°„ï¼›

   1. æœ‰ï¼šç›´æ¥è¿”å›å¯¹åº”çš„ipåœ°å€ï¼Œè¿™ä¸ªåœ°å€ä¸­ï¼Œæœ‰æˆ‘ä»¬éœ€è¦è®¿é—®çš„webç¨‹åºï¼Œå¯ä»¥ç›´æ¥è®¿é—®

   ```java
    127.0.0.1 www.clear.com
   ```

   1. æ²¡æœ‰ï¼šå»DNSæœåŠ¡å™¨æ‰¾ï¼Œæ‰¾åˆ°çš„è¯å°±è¿”å›ï¼Œæ‰¾ä¸åˆ°å°±è¿”å›æ‰¾ä¸åˆ°ï¼›

   ![åŸŸå](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231113328-965329938.png)

3. å¯ä»¥é…ç½®ä¸€ä¸‹ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰æ€§ï¼‰

### 3.4ã€å‘å¸ƒä¸€ä¸ªwebç½‘ç«™

ä¸ä¼šå°±å…ˆæ¨¡ä»¿

- å°†è‡ªå·±å†™çš„ç½‘ç«™ï¼Œæ”¾åˆ°æœåŠ¡å™¨ï¼ˆTomcat)ä¸­æŒ‡å®šçš„webåº”ç”¨çš„æ–‡ä»¶å¤¹ï¼ˆwebapps)ä¸‹ï¼Œå°±å¯ä»¥è®¿é—®äº†

ç½‘ç«™åº”è¯¥æœ‰çš„ç»“æ„

```java
--webapps ï¼šTomcatæœåŠ¡å™¨çš„webç›®å½•
	-ROOT
	-kuangstudy ï¼šç½‘ç«™çš„ç›®å½•å
		- WEB-INF
			-classes : javaç¨‹åº
			-libï¼šwebåº”ç”¨æ‰€ä¾èµ–çš„jaråŒ…
			-web.xml ï¼šç½‘ç«™é…ç½®æ–‡ä»¶
		- index.html é»˜è®¤çš„é¦–é¡µ
		- static 
            -css
            	-style.css
            -js
            -img
         -.....
```

HTTPåè®®ï¼šé¢è¯•
Maven:æ„å»ºå·¥å…·

- Mavenå®‰è£…åŒ…

Servletå…¥é—¨

- HelloWorld!
- Servleté…ç½® Â·åŸç†

## 4ã€Http

### 4.1ã€ä»€ä¹ˆæ˜¯HTTP

(è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯ä¸€ä¸ªç®€å•çš„è¯·æ±‚-å“åº”åè®®ï¼Œå®ƒé€šå¸¸è¿è¡Œåœ¨TCPä¹‹ä¸Šã€‚

- æ–‡æœ¬ï¼šhtmlï¼Œå­—ç¬¦ä¸²ï¼Œâ€¦
- è¶…æ–‡æœ¬ï¼šå›¾ç‰‡ï¼ŒéŸ³ä¹ï¼Œè§†é¢‘ï¼Œå®šä½ï¼Œåœ°å›¾.â€¦â€¦
- ç«¯å£:80

Https:å®‰å…¨çš„

- ç«¯å£:443

### 4.2ã€ä¸¤ä¸ªæ—¶ä»£

- http1.0
  - HTTP/1.0ï¼šå®¢æˆ·ç«¯å¯ä»¥ä¸webæœåŠ¡å™¨è¿æ¥åï¼Œåªèƒ½è·å¾—ä¸€ä¸ªwebèµ„æºï¼Œæ–­å¼€è¿æ¥
- http1.1
  - HTTP/1.1ï¼šå®¢æˆ·ç«¯å¯ä»¥ä¸webæœåŠ¡å™¨è¿æ¥åï¼Œå¯ä»¥è·å¾—å¤šä¸ªwebèµ„æºã€‚

### 4.3ã€Httpè¯·æ±‚

- å®¢æˆ·ç«¯â€“å‘è¯·æ±‚ï¼ˆRequestï¼‰â€“æœåŠ¡å™¨

ç™¾åº¦ï¼š

```java
Request URL:https://www.baidu.com/   è¯·æ±‚åœ°å€
Request Method:GET    getæ–¹æ³•/postæ–¹æ³•
Status Code:200 OK    çŠ¶æ€ç ï¼š200
Remoteï¼ˆè¿œç¨‹ï¼‰ Address:14.215.177.39:443

Accept:text/html  
Accept-Encoding:gzip, deflate, br
Accept-Language:zh-CN,zh;q=0.9    è¯­è¨€
Cache-Control:max-age=0
Connection:keep-alive
```

#### 1ã€è¯·æ±‚è¡Œ

- è¯·æ±‚è¡Œä¸­çš„è¯·æ±‚æ–¹å¼ï¼šGET
- è¯·æ±‚æ–¹å¼ï¼š**Get,Post,**HEAD,DELETE,PUT,TRACT.â€¦
  - getï¼šè¯·æ±‚èƒ½å¤Ÿæºå¸¦çš„å‚æ•°æ¯”è¾ƒå°‘ï¼Œå¤§å°æœ‰é™åˆ¶ï¼Œä¼šåœ¨æµè§ˆå™¨çš„URLåœ°å€æ æ˜¾ç¤ºæ•°æ®å†…å®¹ï¼Œä¸å®‰å…¨ï¼Œä½†é«˜æ•ˆ
  - post:è¯·æ±‚èƒ½å¤Ÿæºå¸¦çš„å‚æ•°æ²¡æœ‰é™åˆ¶ï¼Œå¤§å°æ²¡æœ‰é™åˆ¶ï¼Œä¸ä¼šåœ¨æµè§ˆå™¨çš„URLåœ°å€æ æ˜¾ç¤ºæ•°æ®å†…å®¹ï¼Œå®‰å…¨ï¼Œä½†ä¸é«˜æ•ˆã€‚

#### 2ã€æ¶ˆæ¯å¤´

```java
Acceptï¼šå‘Šè¯‰æµè§ˆå™¨ï¼Œå®ƒæ‰€æ”¯æŒçš„æ•°æ®ç±»å‹
Accept-Encodingï¼šæ”¯æŒå“ªç§ç¼–ç æ ¼å¼  GBK   UTF-8   GB2312  ISO8859-1
Accept-Languageï¼šå‘Šè¯‰æµè§ˆå™¨ï¼Œå®ƒçš„è¯­è¨€ç¯å¢ƒ
Cache-Controlï¼šç¼“å­˜æ§åˆ¶
Connectionï¼šå‘Šè¯‰æµè§ˆå™¨ï¼Œè¯·æ±‚å®Œæˆæ˜¯æ–­å¼€è¿˜æ˜¯ä¿æŒè¿æ¥
HOSTï¼šä¸»æœº..../.
```

### 4.4ã€Httpå“åº”

- æœåŠ¡å™¨â€“å“åº”â€¦â€¦.å®¢æˆ·ç«¯

ç™¾åº¦ï¼š

```java
Cache-Control:private    ç¼“å­˜æ§åˆ¶
Connection:Keep-Alive    è¿æ¥
Content-Encoding:gzip    ç¼–ç 
Content-Type:text/html   ç±»å‹  
```

#### 1ã€å“åº”ä½“

```java
Acceptï¼šå‘Šè¯‰æµè§ˆå™¨ï¼Œå®ƒæ‰€æ”¯æŒçš„æ•°æ®ç±»å‹
Accept-Encodingï¼šæ”¯æŒå“ªç§ç¼–ç æ ¼å¼  GBK   UTF-8   GB2312  ISO8859-1
Accept-Languageï¼šå‘Šè¯‰æµè§ˆå™¨ï¼Œå®ƒçš„è¯­è¨€ç¯å¢ƒ
Cache-Controlï¼šç¼“å­˜æ§åˆ¶
Connectionï¼šå‘Šè¯‰æµè§ˆå™¨ï¼Œè¯·æ±‚å®Œæˆæ˜¯æ–­å¼€è¿˜æ˜¯ä¿æŒè¿æ¥
HOSTï¼šä¸»æœº..../.
Refreshï¼šå‘Šè¯‰å®¢æˆ·ç«¯ï¼Œå¤šä¹…åˆ·æ–°ä¸€æ¬¡ï¼›
Locationï¼šè®©ç½‘é¡µé‡æ–°å®šä½ï¼›
```

#### 2ã€å“åº”çŠ¶æ€ç 

200ï¼šè¯·æ±‚å“åº”æˆåŠŸ 200

3xx:è¯·æ±‚é‡å®šå‘

- é‡å®šå‘ï¼šä½ é‡æ–°åˆ°æˆ‘ç»™ä½ æ–°ä½ç½®å»ï¼›

4xx:æ‰¾ä¸åˆ°èµ„æº 404

- èµ„æºä¸å­˜åœ¨ï¼›

5xx:æœåŠ¡å™¨ä»£ç é”™è¯¯ 500  502: ç½‘å…³é”™è¯¯



##### **å¸¸è§é¢è¯•é¢˜ï¼š**

   **å½“ä½ çš„æµè§ˆå™¨ä¸­åœ°å€æ è¾“å…¥åœ°å€å¹¶ä¼šå›è½¦çš„ä¸€ç¬é—´åˆ°é¡µé¢èƒ½å¤Ÿå±•ç¤ºå›æ¥ï¼Œç»å†äº†ä»€ä¹ˆï¼Ÿ**

1. ï¼ˆåŸŸåè§£æï¼‰åœ¨å®¢æˆ·ç«¯ï¼Œæµè§ˆå™¨è¾“å…¥åœ°å€åï¼Œé¦–å…ˆä¼šåœ¨windowsç³»ç»Ÿæ–‡ä»¶çš„hostsä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰å¯¹åº”çš„ipåœ°å€ï¼Œå¦‚æœæ²¡æœ‰åˆ™éœ€è¦å‘DNSåŸŸåè§£ææœåŠ¡å™¨è¯¢é—®è¯¥åŸŸåå¯¹åº”çš„ipåœ°å€ã€‚

2. ï¼ˆTCPä¸‰æ¬¡æ¡æ‰‹ï¼‰è·å–ç›¸åº”çš„ipåœ°å€åï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯å»ºç«‹TCPè¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰ï¼Œï¼ˆç½‘ç»œå±‚ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç‰©ç†å±‚ï¼‰

   ä¸‰æ¬¡æ¡æ‰‹-->

   1. ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€ä¸€ä¸ªSYNæ®µï¼Œè¯¥æ®µä¸­åŒ…å«å®¢æˆ·ç«¯çš„åˆå§‹åºåˆ—å·ã€‚
   2. ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨ç«¯è¿”å›å®¢æˆ·ç«¯SYN+ACKï¼Œè¯¥ç«¯ä¸­åŒ…å«æœåŠ¡å™¨ç«¯çš„åˆå§‹åºåˆ—å·ï¼ŒACKè¡¨ç¤ºï¼Œå·²ç»ç¡®å®šæ”¶åˆ°å®¢æˆ·ç«¯çš„SYNæ®µã€‚
   3. ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å“åº”ä¸€ä¸ªACKç«¯ï¼ŒACKè¡¨ç¤ºï¼Œå·²ç»ç¡®å®šæ¥å—åˆ°æœåŠ¡å™¨ç«¯çš„SYNæ®µã€‚

3. ï¼ˆå»ºç«‹èµ·TCPè¿æ¥åå‘èµ·httpè¯·æ±‚ï¼‰å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚ï¼ŒåŒ…å«è¯·æ±‚è¡Œï¼Œè¯·æ±‚å¤´ã€‚ä¸»è¦çš„ä¸¤ç§è¯·æ±‚æ–¹å¼ï¼ˆGETä¸POSTï¼‰

   1. GET:è¯·æ±‚èƒ½å¤Ÿæºå¸¦çš„å‚æ•°æ¯”è¾ƒå°‘ï¼Œå¤§å°æœ‰é™åˆ¶ï¼Œä¼šåœ¨æµè§ˆå™¨çš„URLåœ°å€æ æ˜¾ç¤ºæ•°æ®çš„å†…å®¹ï¼Œä¸å®‰å…¨ï¼Œä½†é«˜æ•ˆã€‚
      1. POST:è¯·æ±‚èƒ½å¤Ÿæºå¸¦çš„å‚æ•°æ²¡æœ‰é™åˆ¶ï¼Œå¤§å°æ²¡æœ‰é™åˆ¶ï¼Œä¸ä¼šåœ¨æµè§ˆå™¨çš„URLåœ°å€æ æ˜¾ç¤ºæ•°æ®å†…å®¹ï¼Œå®‰å…¨ï¼Œä½†ä¸é«˜æ•ˆã€‚

4. ï¼ˆæœåŠ¡å™¨å“åº”httpè¯·æ±‚ï¼‰æœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼Œå¹¶è¿”å›å“åº”ï¼ŒåŒ…å«çŠ¶æ€ç ï¼Œå“åº”å¤´ï¼Œå“åº”ä½“ã€‚

5. ï¼ˆæµè§ˆå™¨è§£æhttpä»£ç ï¼‰æµè§ˆå™¨æ”¶åˆ°å“åº”ï¼Œè§£æhttpä»£ç æ¸²æŸ“é¡µé¢ï¼Œå¹¶åœ¨æµè§ˆå™¨é¡µé¢å±•ç¤ºå‡ºæ¥ã€‚

6. ï¼ˆæ–­å¼€è¿æ¥ï¼‰http1.0çŸ­è¿æ¥ï¼Œhttp1.1é•¿è¿æ¥ã€‚



## 5ã€Maven

**æˆ‘ä¸ºä»€ä¹ˆè¦å­¦ä¹ è¿™ä¸ªæŠ€æœ¯ï¼Ÿ**

1. åœ¨Javawebå¼€å‘ä¸­ï¼Œéœ€è¦ä½¿ç”¨å¤§é‡çš„jaråŒ…ï¼Œæˆ‘ä»¬æ‰‹åŠ¨å»å¯¼å…¥ï¼›
2. å¦‚ä½•èƒ½å¤Ÿè®©ä¸€ä¸ªä¸œè¥¿è‡ªåŠ¨å¸®æˆ‘å¯¼å…¥å’Œé…ç½®è¿™ä¸ªjaråŒ…ã€‚

ç”±æ­¤ï¼ŒMavenè¯ç”Ÿäº†ï¼

### 5.1ã€Mavené¡¹ç›®æ¶æ„ç®¡ç†å·¥å…·

æˆ‘ä»¬ç›®å‰ç”¨æ¥å°±æ˜¯æ–¹ä¾¿å¯¼å…¥jaråŒ…çš„ï¼

Mavençš„æ ¸å¿ƒæ€æƒ³ï¼š**çº¦å®šå¤§äºé…ç½®**

- æœ‰çº¦æŸï¼Œä¸è¦å»è¿åã€‚

Mavenä¼šè§„å®šå¥½ä½ è¯¥å¦‚ä½•å»ç¼–å†™æˆ‘ä»¬Javaä»£ç ï¼Œå¿…é¡»è¦æŒ‰ç…§è¿™ä¸ªè§„èŒƒæ¥ï¼›

### 5.2ã€ä¸‹è½½å®‰è£…Maven

å®˜ç½‘ï¼šhttps://maven.apache.org/

![Mavenä¸‹è½½](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231113046-904257473.png)

ä¸‹è½½å®Œæˆåï¼Œè§£å‹å³å¯ï¼›

å°ç‹‚ç¥è€å¸ˆå‹æƒ…å»ºè®®ï¼šç”µè„‘ä¸Šçš„æ‰€æœ‰ç¯å¢ƒéƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–¹ä¾¿ç®¡ç†ï¼›

### 5.3ã€é…ç½®ç¯å¢ƒå˜é‡

åœ¨æˆ‘ä»¬çš„ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­é…ç½®å¦‚ä¸‹é…ç½®ï¼š

- M2_HOME mavenç›®å½•ä¸‹çš„binç›®å½•
- MAVEN_HOME mavençš„ç›®å½•
- åœ¨ç³»ç»Ÿçš„pathä¸­é…ç½®%MAVEN_HOME%\bin

![test](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231112806-869251097.png)

ä½¿ç”¨å‘½ä»¤ **mvn -version**æµ‹è¯•Mavenæ˜¯å¦å®‰è£…æˆåŠŸï¼Œä¿è¯å¿…é¡»é…ç½®å®Œæ¯•ï¼

### 5.4ã€é˜¿é‡Œäº‘é•œåƒ

- é•œåƒï¼šmirrors
- ä½œç”¨ï¼šåŠ é€Ÿæˆ‘ä»¬çš„ä¸‹è½½
- å›½å†…å»ºè®®ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒ

```java
<mirror>
    <id>nexus-aliyun</id>  
    <mirrorOf>*,!jeecg,!jeecg-snapshots</mirrorOf>  
    <name>Nexus aliyun</name>  
    <url>http://maven.aliyun.com/nexus/content/groups/public</url> 
</mirror>
```

**F:\maven\apache-maven-3.6.1\conf\settings.xml**
ï¼ˆæˆ‘çš„ä»“åº“é…ç½®æºå’Œä»“åº“çš„æ–‡ä»¶ä½ç½®ï¼‰

### 5.5ã€æœ¬åœ°ä»“åº“

åœ¨æœ¬åœ°çš„ä»“åº“ï¼Œè¿œç¨‹ä»“åº“ï¼› å»ºç«‹ä¸€ä¸ªæœ¬åœ°ä»“åº“ï¼šlocalRepository

```java
 <localRepository>F:\maven\apache-maven-3.8.6\maven-repo</localRepository>
```

### 5.6ã€åœ¨IDEAä¸­ä½¿ç”¨Maven

##### **ç”±äºæˆ‘çš„IDEAæ˜¯2021ç‰ˆæœ¬çš„æ‰€ä»¥è·Ÿè§†é¢‘æ“ä½œæœ‰ç‚¹ä¸ä¸€æ ·ï¼Œä½ç‰ˆæœ¬å¯ä»¥çœ‹ç‹‚ç¥è€å¸ˆ**ğŸ˜

1. å¯åŠ¨IDEA
2. åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®

![Mavenä½¿ç”¨](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231112561-511985367.png)

![Maven03](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231112037-240104385.png)

![Maven04](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231111833-932319591.png)

1. ç­‰å¾…é¡¹ç›®åˆå§‹åŒ–å®Œæ¯•

![Maven06](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231111331-481458382.png)

1. è§‚å¯Ÿmavenä»“åº“ä¸­å¤šäº†ä»€ä¹ˆä¸œè¥¿ï¼Ÿ

![Maven07](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231111081-1630812731.png)

1. IDEAä¸­çš„Mavenè®¾ç½®

![Maven08](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231110806-894389382.png)

![Maven09](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231110520-1925594007.png)

1. åˆ°è¿™é‡Œï¼ŒMavenåœ¨IDEAä¸­çš„é…ç½®å’Œä½¿ç”¨å°±OKäº†

### 5.7ã€åˆ›å»ºä¸€ä¸ªæ™®é€šçš„Mavené¡¹ç›®

![Maven10](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231110266-575700739.png)

![Maven12](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231110022-1716725491.png)

### 5.8æ ‡è®°æ–‡ä»¶å¤¹åŠŸèƒ½

ç¬¬ä¸€ç§æ–¹æ³•ï¼š

![Maven13](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231109705-1103798393.png)

ç¬¬äºŒç§æ–¹æ³•ï¼š

![Maven14](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231109278-525437858.png)

![Maven15](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231109058-292766214.png)

### 5.9åœ¨IDEAä¸­é…ç½®Tomcat

![Tomcat01](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231108835-192093788.png)

![Tomcat02](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231108620-146923204.png)

![Tomcat03](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231108367-1746070518.png)

![Tomcat04](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231108124-449527678.png)

è§£å†³è­¦å‘Šé—®é¢˜

ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬è®¿é—®ä¸€ä¸ªç½‘å€ï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªæ–‡ä»¶å¤¹çš„åå­—ï¼›

artifactsè­¦å‘Šæˆ‘ä»¬è¦åˆ›å»ºï¼Œç‚¹å‡»å³è¾¹çš„Fixæˆ–è€…ç‚¹å‡»Deployment

![Tomcat5](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231107882-1209978310.png)

![Tomcat6](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231107663-1612737127.png)

![Tomcat07](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231107397-785833956.png)

![Tomcat08](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231107149-1435656564.png)

![Tomcat09](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231106922-1574583612.png)

Tomcatåˆ°è¿™é‡Œå°±é…ç½®æˆåŠŸäº†ğŸ˜ŠğŸ˜

### 5.10 pomæ–‡ä»¶

pom.xmlæ˜¯Mavençš„æ ¸å¿ƒé…ç½®æ–‡ä»¶

![Mavenä»‹ç»01](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231106678-1437584947.png)

![Mavenä»‹ç»02](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231106340-1072925277.png)

pom.xmlæ–‡ä»¶ä»‹ç»

![Mavenä»‹ç»03](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231106094-98018008.png)

![Mavenä»‹ç»04](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231105856-636601007.png)

Mavenç”±äºä»–çš„çº¦å®šå¤§äºé…ç½®ï¼Œæˆ‘ä»¬ä¹‹åå¯èƒ½é‡åˆ°æˆ‘ä»¬å†™çš„é…ç½®æ–‡ä»¶ï¼Œæ— æ³•è¢«å¯¼å‡ºæˆ–è€…ä¸ç”Ÿæ•ˆçš„é—®é¢˜ï¼Œè§£å†³åŠæ³•ï¼š

```java
<!--åœ¨bui1dä¸­é…ç½®resourcesï¼Œæ¥é˜²æ­¢æˆ‘ä»¬èµ„æºå¯¼å‡ºå¤±è´¥çš„é—®é¢˜-->
  <build>
    <resources>
      <resource>
        <directory>src/main/resources</directory>
        <includes>
          <include>**/*.properties</include>
          <include>**/*.xml</include>
        </includes>
        <filtering>false</filtering>
      </resource>
      <resource>
        <directory>src/main/java</directory>
        <includes>
          <include>**/*.properties</include>
          <include>**/*.xml</include>
        </includes>
        <filtering>false</filtering>
      </resource>
    </resources>
  </build>
```

### 5.11 IDEAæ“ä½œ

å¯èƒ½æˆ‘IDEAç‰ˆæœ¬å¤ªé«˜è¿˜æ˜¯å› ä¸ºå•¥ï¼Œæˆ‘çš„å…³ç³»ä¾èµ–çš„åŒ…å°±é‚£ä¹ˆå¤šğŸ˜‚

![Mavenä»‹ç»05](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231105626-529889500.png)

### 5.12 è§£å†³é‡åˆ°çš„é—®é¢˜

1. **å»ºè®®ä¸è¦ç”¨é«˜ç‰ˆæœ¬çš„maven,ç”¨3.6.1**ï¼Œå¦åˆ™ä¼šå‡ºç°Pluginsä¸å‡ºæ¥æˆ–å…¶ä»–é—®é¢˜,å¦‚æœå‡ºç°äº†è¿™äº›é—®é¢˜å»ºè®®æ¢maven3.6.1å°±èƒ½è§£å†³ğŸ˜
2. IDEAä¸­æ¯æ¬¡éƒ½è¦é‡å¤é…ç½®Mavençš„é—®é¢˜

![é…ç½®1](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231105390-1173442208.png)

![é…ç½®2](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231104961-1157907351.png)

![é…ç½®3](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231104754-1953315384.png)

1. mavené»˜è®¤webé¡¹ç›®ä¸­çš„web.xmlç‰ˆæœ¬é—®é¢˜ï¼

![ç‰ˆæœ¬4](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231104495-565207158.png)

â€˜â€™æ›¿æ¢ä¸ºwebapp4.0ç‰ˆæœ¬å’Œtomcatä¸€è‡´ï¼

![ç‰ˆæœ¬2](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231104230-1153716028.png)

è¿™é‡Œæ˜¯web.xmlæ–‡ä»¶ğŸ˜Š

```java
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
         version="4.0"
         metadata-complete="true">
</web-app >
```

### 5.13 Mavenä»“åº“çš„ä½¿ç”¨

åœ°å€ï¼šhttps://mvnrepository.com/

![mavenä½¿ç”¨1](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231103937-572926593.png)

![Mavenä½¿ç”¨2](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231103640-1132452370.png)

![Mavenä½¿ç”¨03](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231103280-527201044.png)

![Mavenä½¿ç”¨05](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231102961-2062405956.png)

ä½œç”¨åŸŸä¸€èˆ¬å¯ä»¥åˆ æ‰

æ­£å¸¸æƒ…å†µåº”è¯¥å¯¼å…¥å®Œä¸Šé¢çš„åŒ…å°±OKäº†

## 6ã€Servlet

### 6.1ã€Servletç®€ä»‹

- Servletå°±æ˜¯sunå…¬å¸å¼€å‘åŠ¨æ€webçš„ä¸€é—¨æŠ€æœ¯
- Sunåœ¨è¿™äº›APIä¸­æä¾›ä¸€ä¸ªæ¥å£å«åšï¼šServletï¼Œå¦‚æœä½ æƒ³å¼€å‘ä¸€ä¸ªServletç¨‹åºï¼Œåªéœ€è¦å®Œæˆä¸¤ä¸ªå°æ­¥éª¤ï¼š
  - ç¼–å†™ä¸€ä¸ªç±»ï¼Œå®ç°Serletæ¥å£
  - æŠŠå¼€å‘å¥½javaç±»éƒ¨ç½²åˆ°webæœåŠ¡å™¨ä¸­ã€‚

### 6.2ã€HelloServlet

Serlvetæ¥å£Sunå…¬å¸æœ‰ä¸¤ä¸ªé»˜è®¤çš„å®ç°ç±»ï¼šHttpServletï¼ŒGenericServled

### 6.2ã€HelloServlet

1. æ„å»ºä¸€ä¸ªæ™®é€šçš„Mavené¡¹ç›®ï¼Œç­‰ç†é¢çš„scç›®å½•ï¼Œä»¥åæˆ‘ä»¬çš„å­¦ä¹ å°±åœ¨è¿™ä¸ªé¡¹ç›®é‡Œé¢å»ºç«‹Moudelï¼›è¿™ä¸ªç©ºçš„å·¥ç¨‹å°±é¢˜Mavenä¸»å·¥ç¨‹ï¼›
2. å…³äºMavençˆ¶å­å·¥ç¨‹çš„ç†è§£ï¼›

çˆ¶é¡¹ç›®ä¸­ä¼šæœ‰

```java
      <modules>
          <module>servlet-01</module>
      </modules>
```

å­é¡¹ç›®ä¼šæœ‰

```java
    <parent>
        <artifactId>javaweb-02-servlet</artifactId>
        <groupId>com.shen</groupId>
        <version>1.0-SNAPSHOT</version>
    </parent>
```

çˆ¶é¡¹ç›®ä¸­çš„javaå­é¡¹ç›®å¯ä»¥ç›´æ¥ä½¿ç”¨(ç›¸å½“äºå„¿å­ç»§æ‰¿äº†çˆ¸çˆ¸çš„ä¸œè¥¿)

```java
son extends father
```

1. Mavenç¯å¢ƒä¼˜åŒ–
2. ä¿®æ”¹web.xmlä¸ºæœ€æ–°çš„
3. å°†mavençš„ç»“æ„æ­å»ºå®Œæ•´
   .
4. ç¼–å†™ä¸€ä¸ªServletç¨‹åº
   1. ç¼–å†™ä¸€ä¸ªæ™®é€šç±»
   2. å®ç°Servletæ¥å£ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥ç»§æ‰¿HttpServlet

```java
     public class HelloServlet extends HttpServlet {
         
         //ç”±äºgetæˆ–è€…poståªæ˜¯è¯·æ±‚å®ç°çš„ä¸åŒçš„æ–¹å¼ï¼Œå¯ä»¥ç›¸äº’è°ƒç”¨ï¼Œä¸šåŠ¡é€»è¾‘éƒ½ä¸€æ ·ï¼›
         @Override
         protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
             //ServletOutputStream outputStream = resp.getOutputStream();
             PrintWriter writer = resp.getWriter(); //å“åº”æµ
             writer.print("Hello,Serlvet");
         }
     
         @Override
         protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
             doGet(req, resp);
         }
     }
    
```

1. ç¼–å†™Servletçš„æ˜ å°„
   ä¸ºä»€ä¹ˆéœ€è¦æ˜ å°„ï¼šæˆ‘ä»¬å†™çš„æ˜¯JAVAç¨‹åºï¼Œä½†æ˜¯è¦é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œè€Œæµè§ˆå™¨éœ€è¦è¿æ¥webæœåŠ¡å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€
   è¦å†webæœåŠ¡ä¸­æ³¨å†Œæˆ‘ä»¬å†™çš„Servletï¼Œè¿˜éœ€ç»™ä»–ä¸€ä¸ªæµè§ˆå™¨èƒ½å¤Ÿè®¿é—®çš„è·¯å¾„ï¼›

```java
	<!--æ³¨å†ŒServlet-->
      <servlet>
          <servlet-name>hello</servlet-name>
          <servlet-class>com.shen.servlet.HelloServlet</servlet-class>
      </servlet>
      <!--Servletçš„è¯·æ±‚è·¯å¾„-->
      <servlet-mapping>
          <servlet-name>hello</servlet-name>
          <url-pattern>/hello</url-pattern>
      </servlet-mapping>
```

 6. é…ç½®Tomcat

æ³¨æ„ï¼šé…ç½®é¡¹ç›®å‘å¸ƒçš„è·¯å¾„å°±å¯ä»¥äº†

![Tomcats1](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231102728-113437164.png)

![Tomcats02](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231102464-538256734.png)

1. å¯åŠ¨æµ‹è¯•ï¼ŒOKï¼

### 6.3ã€ServletåŸç†

Servletæ˜¯ç”±WebæœåŠ¡å™¨è°ƒç”¨ï¼ŒwebæœåŠ¡å™¨åœ¨æ”¶åˆ°æµè§ˆå™¨è¯·æ±‚ä¹‹åï¼Œä¼šï¼š

![1](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231102155-249789999.png)

### 6.4ã€Mappingé—®é¢˜

1. ä¸€ä¸ªServletå¯ä»¥æŒ‡å®šä¸€ä¸ªæ˜ å°„è·¯å¾„

```java
      <servlet-mapping>
          <servlet-name>hello</servlet-name>
          <url-pattern>/hello</url-pattern>
      </servlet-mapping>
```

1. ä¸€ä¸ªservletå¯ä»¥æŒ‡å®šå¤šä¸ªæ˜ å°„è·¯å¾„

```java
      <servlet-mapping>
          <servlet-name>hello</servlet-name>
          <url-pattern>/hello</url-pattern>
      </servlet-mapping>
      <servlet-mapping>
          <servlet-name>hello</servlet-name>
          <url-pattern>/hello2</url-pattern>
      </servlet-mapping>
      <servlet-mapping>
          <servlet-name>hello</servlet-name>
          <url-pattern>/hello3</url-pattern>
      </servlet-mapping>
      <servlet-mapping>
          <servlet-name>hello</servlet-name>
          <url-pattern>/hello4</url-pattern>
      </servlet-mapping>
      <servlet-mapping>
          <servlet-name>hello</servlet-name>
          <url-pattern>/hello5</url-pattern>
      </servlet-mapping>
  
```

1. ä¸€ä¸ªservletå¯ä»¥æŒ‡å®šé€šç”¨æ˜ å°„è·¯å¾„

```java
<servlet-mapping>
    <servlet-name>hello</servlet-name>
    <url-pattern>/hello/*</url-pattern>
</servlet-mapping>
```

1. é»˜è®¤è¯·æ±‚è·¯å¾„

```java
   <!--é»˜è®¤è¯·æ±‚è·¯å¾„-->
   <servlet-mapping>
       <servlet-name>hello</servlet-name>
       <url-pattern>/*</url-pattern>
   </servlet-mapping>
```

1. æŒ‡å®šä¸€äº›åç¼€æˆ–è€…å‰ç¼€ç­‰ç­‰â€¦

```java
 <!--å¯ä»¥è‡ªå®šä¹‰åç¼€å®ç°è¯·æ±‚æ˜ å°„
      æ³¨æ„ç‚¹ï¼Œ*å‰é¢ä¸èƒ½åŠ é¡¹ç›®æ˜ å°„çš„è·¯å¾„
      hello/sajdlkajda.clear
      -->
  <servlet-mapping>
      <servlet-name>hello</servlet-name>
      <url-pattern>*.clear</url-pattern>
  </servlet-mapping>
```

1. ä¼˜å…ˆçº§é—®é¢˜

 æŒ‡å®šäº†å›ºæœ‰çš„æ˜ å°„è·¯å¾„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±ä¼šèµ°é»˜è®¤çš„å¤„ç†è¯·æ±‚ï¼›

```java
  <!--404-->
  <servlet>
      <servlet-name>error</servlet-name>
      <servlet-class>com.kuang.servlet.ErrorServlet</servlet-class>
  </servlet>
  <servlet-mapping>
      <servlet-name>error</servlet-name>
      <url-pattern>/*</url-pattern>
  </servlet-mapping>
```

### 6.5ã€ServletContext

webå®¹å™¨åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œå®ƒä¼šä¸ºæ¯ä¸ªwebç¨‹åºéƒ½åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ServletContextå¯¹è±¡ï¼Œå®ƒä»£è¡¨äº†å½“å‰çš„webåº”ç”¨ï¼›

#### 1ã€å…±äº«æ•°æ®

æˆ‘åœ¨è¿™ä¸ªServletä¸­ä¿å­˜çš„æ•°æ®ï¼Œå¯ä»¥åœ¨å¦å¤–ä¸€ä¸ªservletä¸­æ‹¿åˆ°ï¼›

```java
public class HelloServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        
        //this.getInitParameter()   åˆå§‹åŒ–å‚æ•°
        //this.getServletConfig()   Servleté…ç½®
        //this.getServletContext()  Servletä¸Šä¸‹æ–‡
        ServletContext context = this.getServletContext();

        String username = "èƒ¡å‡¯è‰"; //æ•°æ®
        context.setAttribute("username",username); //å°†ä¸€ä¸ªæ•°æ®ä¿å­˜åœ¨äº†	ServletContextä¸­ï¼Œåå­—ä¸ºï¼šusername ã€‚å€¼ username

    }

}
public class GetServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        ServletContext context = this.getServletContext();
        String username = (String) context.getAttribute("username");

        resp.setContentType("text/html");
        resp.setCharacterEncoding("utf-8");
        resp.getWriter().print("åå­—"+username);

    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
    <servlet>
        <servlet-name>hello</servlet-name>
        <servlet-class>com.shen.servlet.HelloServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>hello</servlet-name>
        <url-pattern>/hello</url-pattern>
    </servlet-mapping>


    <servlet>
        <servlet-name>getc</servlet-name>
        <servlet-class>com.shen.servlet.GetServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>getc</servlet-name>
        <url-pattern>/getc</url-pattern>
    </servlet-mapping>
```

æµ‹è¯•è®¿é—®ç»“æœï¼›

#### 2ã€è·å–åˆå§‹åŒ–å‚æ•°

```java
<!--é…ç½®ä¸€äº›webåº”ç”¨åˆå§‹åŒ–å‚æ•°-->
<context-param>
    <param-name>url</param-name>
    <param-value>jdbc:mysql://localhost:3306/mybatis</param-value>
</context-param>
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    ServletContext context = this.getServletContext();
    String url = context.getInitParameter("url");
    resp.getWriter().print(url);
}
```

#### 3ã€è¯·æ±‚è½¬å‘

```java
@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    ServletContext context = this.getServletContext();
    System.out.println("è¿›å…¥äº†ServletDemo04");
    //RequestDispatcher requestDispatcher = context.getRequestDispatcher("/gp"); //è½¬å‘çš„è¯·æ±‚è·¯å¾„
    //requestDispatcher.forward(req,resp); //è°ƒç”¨forwardå®ç°è¯·æ±‚è½¬å‘ï¼›
    context.getRequestDispatcher("/gp").forward(req,resp);
}
```

![2](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231100802-781448740.png)

4ã€è¯»å–èµ„æºæ–‡ä»¶
Properties

- åœ¨javaç›®å½•ä¸‹æ–°å»ºproperties
- åœ¨resourcesç›®å½•ä¸‹æ–°å»ºproperties

å‘ç°ï¼šéƒ½è¢«æ‰“åŒ…åˆ°äº†åŒä¸€ä¸ªè·¯å¾„ä¸‹ï¼šclassesï¼Œæˆ‘ä»¬ä¿—ç§°è¿™ä¸ªè·¯å¾„ä¸ºclasspath:

æ€è·¯ï¼šéœ€è¦ä¸€ä¸ªæ–‡ä»¶æµ

```properties
username=root12312
password=zxczxczxc
public class ServletDemo05 extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        InputStream is = this.getServletContext().getResourceAsStream("/WEB-INF/classes/com/kuang/servlet/aa.properties");

        Properties prop = new Properties();
        prop.load(is);
        String user = prop.getProperty("username");
        String pwd = prop.getProperty("password");

        resp.getWriter().print(user+":"+pwd);

    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
```

è®¿é—®æµ‹è¯•å³å¯ok;

### 6.6ã€HttpServletResponse

```java
webæœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„httpè¯·æ±‚ï¼Œé’ˆå¯¹è¿™ä¸ªè¯·æ±‚ï¼Œåˆ†åˆ«åˆ›å»ºä¸€ä¸ªä»£è¡¨è¯·æ±‚çš„HttpServletRequest
å¯¹è±¡ï¼Œä»£è¡¨å“åº”çš„ä¸€ä¸ªHttpServletResponse;
```

- å¦‚æœè¦è·å–å®¢æˆ·ç«¯è¯·æ±‚è¿‡æ¥çš„å‚æ•°ï¼šæ‰¾HttpServletRequest
- å¦‚æœè¦ç»™å®¢æˆ·ç«¯å“åº”ä¸€äº›ä¿¡æ¯ï¼šæ‰¾HttpServletResponse

#### 1ã€ç®€å•åˆ†ç±»

è´Ÿè´£å‘æµè§ˆå™¨å‘é€æ•°æ®çš„æ–¹æ³•

```java
 servletOutputstream getOutputstream() throws IOException;
 Printwriter getwriter() throws IOException;
```

è´Ÿè´£å‘æµè§ˆå™¨å‘é€å“åº”å¤´çš„æ–¹æ³•

```java
void setCharacterEncoding(String var1)ï¼›
void setContentLength(int var1)ï¼›
void setContentLengthLong(long var1);
void setContentType(String var1)ï¼›
void setDateHeader(String varl,long var2)
void addDateHeader(String var1,long var2)
void setHeader(String var1,String var2);
void addHeader(String var1,String var2)ï¼›
void setIntHeader(String var1,int var2);
void addIntHeader(String varl,int var2);
```

å“åº”çš„çŠ¶æ€ç 

![3](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231101427-1638950517.png)

#### 2ã€ä¸‹è½½æ–‡ä»¶

1. å‘æµè§ˆå™¨è¾“å‡ºæ¶ˆæ¯
2. ä¸‹è½½æ–‡ä»¶
   1. è¦è·å–ä¸‹è½½æ–‡ä»¶çš„è·¯å¾„
   2. ä¸‹è½½çš„æ–‡ä»¶åæ˜¯å•¥ï¼Ÿ
   3. è®¾ç½®æƒ³åŠæ³•è®©æµè§ˆå™¨èƒ½å¤Ÿæ”¯æŒä¸‹è½½æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿
   4. è·å–ä¸‹è½½æ–‡ä»¶çš„è¾“å…¥æµ
   5. åˆ›å»ºç¼“å†²åŒº
   6. è·å–OutputStreamå¯¹è±¡
   7. å°†FileOutputStreamæµå†™å…¥åˆ°buferç¼“å†²åŒº
   8. ä½¿ç”¨OutputStreamå°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¾“å‡ºåˆ°å®¢æˆ·ç«¯ï¼

```java
package com.shen.servlet;

import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.URLEncoder;

public class FileServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //1.è·å–ä¸‹è½½æ–‡ä»¶çš„è·¯å¾„
        String realPath = "E:\\Workspace\\JavaWorkspace\\StudyJavaweb\\javaweb-02-servlet\\response\\target\\classes\\1.png";
        System.out.println("ä¸‹è½½æ–‡ä»¶çš„è·¯å¾„ï¼š"+realPath);
        //2.ä¸‹è½½çš„æ–‡ä»¶åæ˜¯å•¥
        String fileName = realPath.substring(realPath.lastIndexOf("\\") + 1);
        //3.è®¾ç½®æƒ³åŠæ³•è®©æµè§ˆå™¨èƒ½å¤Ÿæ”¯æŒä¸‹è½½æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿
        resp.setHeader("Content-disposition","attachment;filename="+ URLEncoder.encode(fileName,"utf-8"));
        //4.è·å–ä¸‹è½½æ–‡ä»¶çš„è¾“å…¥æµ
        FileInputStream in = new FileInputStream(realPath);
        //5.åˆ›å»ºç¼“å†²åŒº
        int len =0;
        byte[] buffer = new byte[1024];
        //6.è·å¾—OutputStreamå¯¹è±¡
        ServletOutputStream out = resp.getOutputStream();
        //7.å°†FileOutputStreamæµå†™å…¥åˆ°bufferç¼“å†²åŒº,ä½¿ç”¨OutputStreamå°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¾“å‡ºåˆ°å®¢æˆ·ç«¯ï¼
        while (in.read(buffer)>0){
            out.write(buffer,0,len);
        }
        in.close();
        out.close();
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
```

#### 3ã€éªŒè¯ç åŠŸèƒ½

éªŒè¯æ€ä¹ˆæ¥çš„?

- å‰ç«¯å®ç°
- åç«¯å®ç°ï¼Œéœ€è¦ç”¨åˆ°Javaçš„å›¾ç‰‡ç±»ï¼Œç”Ÿäº§ä¸€ä¸ªå›¾ç‰‡

```java
package com.shen.servlet;

import javax.imageio.ImageIO;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.Random;

public class ImageServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        // å¦‚ä½•è®©æµè§ˆå™¨3ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡;
        resp.setHeader("refresh","3");
        //åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªå›¾ç‰‡
        BufferedImage image = new BufferedImage(80,20,BufferedImage.TYPE_INT_RGB);
       //å¾—åˆ°å›¾ç‰‡
        Graphics2D g =(Graphics2D)image.getGraphics();//ç¬”
        //è®¾ç½®å›¾ç‰‡çš„èƒŒæ™¯é¢œè‰²
        g.setColor(Color.white);
        g.fillRect(0,0,80,20);
        //ç»™å›¾ç‰‡å†™æ•°æ®
        g.setColor(Color.blue);
        g.setFont(new Font(null,Font.BOLD,20));
        g.drawString(makeNum(),0,20);
//      å‘Šè¯‰æµè§ˆå™¨ï¼Œè¿™ä¸ªè¯·æ±‚ç”¨å›¾ç‰‡çš„æ–¹å¼æ‰“å¼€
        resp.setContentType("image/jpeg");
//        ç½‘ç«™å­˜åœ¨ç¼“å­˜ï¼Œä¸è®©æµè§ˆå™¨ç¼“å­˜
        resp.setDateHeader("expires",-1);
        resp.setHeader("Cache-Control","no-cache");
        resp.setHeader("Pragma","no-cache");
        //æŠŠå›¾ç‰‡å†™ç»™æµè§ˆå™¨
        ImageIO.write(image,"jpg",resp.getOutputStream());
    }
//    ç”Ÿæˆéšæœºæ•°
    private String makeNum(){
        Random random = new Random();
        String  num = random.nextInt(9999999)+"";
        StringBuffer sb = new StringBuffer();
        for (int i = 0; i < 7- num.length(); i++) {
            sb.append("0");
        }
        num= sb.toString()+num;
        return num;
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
æŠ˜å  
```

web.xml

```java
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
         version="4.0"
         metadata-complete="true">

    <servlet>
        <servlet-name>ImageServlet</servlet-name>
        <servlet-class>com.shen.servlet.ImageServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ImageServlet</servlet-name>
        <url-pattern>/img</url-pattern>
    </servlet-mapping>
</web-app >
```

#### 4.å®ç°é‡å®šå‘

![4](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231101090-990124254.png)

ä»€ä¹ˆæ˜¯é‡å®šå‘ï¼šBä¸€ä¸ªwebèµ„æºæ”¶åˆ°å®¢æˆ·ç«¯Aè¯·æ±‚åï¼ŒBä»–ä¼šé€šçŸ¥Aå®¢æˆ·ç«¯å»è®¿é—®å¦ä¸€ä¸ªwebèµ„æºCï¼Œè¿™ä¸ªè¿‡ç¨‹å«é‡å®šå‘ã€‚

å¸¸è§åœºæ™¯:

- ç”¨æˆ·ç™»å½•

```java
 void sendRedirect(String var1) throws IOException;
```

æµ‹è¯•ï¼š

```java
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //
       resp.sendRedirect("/response_war/img");//é‡å®šå‘
    }
```

é‡å®šå‘å’Œè½¬å‘çš„åŒºåˆ«

ç›¸åŒç‚¹

- é¡µé¢éƒ½ä¼šå®ç°è·³è½¬

ä¸åŒç‚¹

- è¯·æ±‚è½¬å‘çš„æ—¶å€™ï¼Œurlä¸ä¼šäº§ç”Ÿå˜åŒ– 307
- é‡å®šå‘çš„æ—¶å€™ï¼Œurlåœ°å€ä¼šå‘ç”Ÿå˜åŒ– 302

![2](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231100802-781448740.png)

**index.jsp**

```xml
<html>
	<body>
		<h2>Hel1o World!</h2>
		
		ã€Š%--è¿™é‡Œè¶…äº¤çš„è·¯å¾„,éœ€è¦å¯»æ‰¾åˆ°é¡¹ç›®çš„è·¯å¾„--%>
		<%--${pageContext. request, contextPath}ä»£è¡¨å½“å‰çš„é¡¹ç›®--%>
		<form action="${pageContext. request.contextPath}/login" method="get">
			ç”¨æˆ·å: <input type="text" name="username"> <br>
			å¯†ç : <input type="password" name="password"> <br>
			<input type="submit" value="ç™»å½•">
		</form>
	
	</body>
</html>
```

**RequestTest.java**

```java
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        System.out.println("è¿›å…¥äº†getæ–¹æ³•");
        //  å¤„ç†è¯·æ±‚
        String username = req.getParameter("username");
        String password = req.getParameter("password");
        System.out.println(username+":"+password);
        //  é‡å®šå‘æ—¶å€™ä¸€å®šè¦æ³¨æ„ï¼Œè·¯å¾„é—®é¢˜ï¼Œå¦åˆ™404
        resp.sendRedirect("/response_war/success.jsp");

    }
```

**é‡å®šå‘é¡µé¢success.jsp**

```java
<%@ page contentType="text/html; charset=UTF-8" language="java" %>
<html>
    <head>
	    <title>Title</title>
	    </head>
    <body>
    	<h1>success</h1>
    </body>
</html>
```

**web.xmlé…ç½®**

```java
    <servlet>
        <servlet-name>request</servlet-name>
        <servlet-class>com.shen.servlet.RequestTest</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>request</servlet-name>
        <url-pattern>/login</url-pattern>
    </servlet-mapping>
```

**å¯¼å…¥ä¾èµ–çš„jaråŒ…**

```java
    <dependencies>
    <!-- https://mvnrepository. com/artifact/javax. servLet/javax. servlet-opi -->
    <dependency>
    <groupld>javax.servlet</grouptd>
    <artifactId>javax. servlet-api</artifactId>
    <version>4.0.1</version>
    </dependency>
    <!-- https://mvnrepository.com/artifact/javax. servLet.jsp/javax. servLet.jsp-opi -->
    <dependency>
    <groupId>javax.servlet.jsp</groupld>
    <artifactId>javax. servlet.jsp-api</artifactId>
    <version>2.3.3</version>
    </dependency>
    </dependencies>
    </project>
```

### 6.7ã€HttpServletRequest

HttpServletRequestä»£è¡¨å®¢æˆ·ç«¯çš„è¯·æ±‚,ç”¨æˆ·é€šè¿‡Httpåè®®è®¿é—®æœåŠ¡å™¨, HTTPè¯·æ±‚ä¸­çš„æ‰€æœ‰ä¿¡æ¯ä¼šè¢«å°è£…åˆ°HttpServletRequest,é€šè¿‡è¿™ä¸ªHttpServletRequestçš„æ–¹æ³•,è·å¾—å®¢æˆ·ç«¯çš„æ‰€æœ‰ä¿¡æ¯;

![5](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231100542-63072630.png)

#### è·å–å‚æ•°,è¯·æ±‚è½¬å‘

![6](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231100223-832260337.png)

**è‡ªå·±åˆ›å»ºç±»ï¼Œä¸”éœ€è¦ç»§æ‰¿HttpServletç±»**

LoginServlet

```java
public class LoginServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //åå°æ¥æ”¶ä¹±ç é—®é¢˜
        req.setCharacterEncoding("utf-8");
        resp.setCharacterEncoding("utf-8");

        String username = req.getParameter("username");
        String password = req.getParameter("password");
        String[] hobbys = req.getParameterValues("hobbys");
        System.out.println("-----------------------");
        System.out.println(username);
        System.out.println(password);
        System.out.println(Arrays.toString(hobbys));
        System.out.println("-----------------------");
        // é€šè¿‡è¯·æ±‚è½¬å‘
        //è¿™é‡Œçš„/ä»£è¡¨å½“å‰çš„webåº”ç”¨
        req.getRequestDispatcher("/success.jsp").forward(req,resp);

    }
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
```

index.jsp

```java
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>ç™»å½•</title>
</head>
<body>
<h1>ç™»å½•</h1>
<div>
<%--    è¿™é‡Œè¡¨å•è¡¨ç¤ºçš„æ„æ€ï¼šä¸€postæ–¹å¼æäº¤è¡¨å•ï¼Œæäº¤åˆ°æˆ‘ä»¬çš„loginè¯·æ±‚--%>
    <form action="${pageContext.request.contextPath}/login" method="post">
        ç”¨æˆ·åï¼š<input type="text" name="username"><br>
        å¯†ç ï¼š<input type="password" name="password"><br>
        çˆ±å¥½ï¼š
        <input type="checkbox" name="hobbys" value="æ‰“ç¯®çƒ">æ‰“ç¯®çƒ
        <input type="checkbox" name="hobbys" value="ä»£ç ">ä»£ç 
        <input type="checkbox" name="hobbys" value="å”±æ­Œ">å”±æ­Œ
        <input type="checkbox" name="hobbys" value="ç”µå½±">ç”µå½±
        <br>
        <input type="submit" value="ç™»å½•">
    </form>
</div>
</body>
</html>
```

## 7ã€Cookieã€Session

### 7.1ã€ä¼šè¯

**ä¼šè¯**ï¼šç”¨æˆ·æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼Œç‚¹å‡»äº†å¾ˆå¤šè¶…é“¾æ¥ï¼Œè®¿é—®å¤šä¸ªwebèµ„æºï¼Œå…³é—­æµè§ˆå™¨ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç§°ä¹‹ä¸ºä¼šè¯ï¼›

**æœ‰çŠ¶æ€ä¼šè¯**ï¼šä¸€ä¸ªåŒå­¦æ¥è¿‡æ•™å®¤ï¼Œä¸‹æ¬¡å†æ¥æ•™å®¤ï¼Œæˆ‘ä»¬ä¼šçŸ¥é“è¿™ä¸ªåŒå­¦ï¼Œæ›¾ç»æ¥è¿‡ï¼Œç§°ä¹‹ä¸ºæœ‰çŠ¶æ€ä¼šè¯ï¼›

**ä¸€ä¸ªç½‘ç«™ï¼Œæ€ä¹ˆè¯æ˜ä½ æ¥è¿‡ï¼Ÿ**

å®¢æˆ·ç«¯ æœåŠ¡ç«¯

1. æœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯ä¸€ä¸ª ä¿¡ä»¶ï¼Œå®¢æˆ·ç«¯ä¸‹æ¬¡è®¿é—®æœåŠ¡ç«¯å¸¦ä¸Šä¿¡ä»¶å°±å¯ä»¥äº†ï¼› cookie
2. æœåŠ¡å™¨ç™»è®°ä½ æ¥è¿‡äº†ï¼Œä¸‹æ¬¡ä½ æ¥çš„æ—¶å€™æˆ‘æ¥åŒ¹é…ä½ ï¼› seesion

### 7.2ã€ä¿å­˜ä¼šè¯çš„ä¸¤ç§æŠ€æœ¯

**cookie**

- å®¢æˆ·ç«¯æŠ€æœ¯ ï¼ˆå“åº”ï¼Œè¯·æ±‚ï¼‰

**session**

- æœåŠ¡å™¨æŠ€æœ¯ï¼Œåˆ©ç”¨è¿™ä¸ªæŠ€æœ¯ï¼Œå¯ä»¥ä¿å­˜ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ï¼Ÿ æˆ‘ä»¬å¯ä»¥æŠŠä¿¡æ¯æˆ–è€…æ•°æ®æ”¾åœ¨Sessionä¸­ï¼

å¸¸è§å¸¸è§ï¼šç½‘ç«™ç™»å½•ä¹‹åï¼Œä½ ä¸‹æ¬¡ä¸ç”¨å†ç™»å½•äº†ï¼Œç¬¬äºŒæ¬¡è®¿é—®ç›´æ¥å°±ä¸Šå»äº†ï¼

### 7.3ã€Cookie

![Cookie](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231059939-1535502904.png)

1. ä»è¯·æ±‚ä¸­æ‹¿åˆ°cookieä¿¡æ¯
2. æœåŠ¡å™¨å“åº”ç»™å®¢æˆ·ç«¯cookie

```java
Cookie[] cookies = req.getCookies(); //è·å¾—Cookie
cookie.getName(); //è·å¾—cookieä¸­çš„key
cookie.getValue(); //è·å¾—cookieä¸­çš„vlaue
new Cookie("lastLoginTime", System.currentTimeMillis()+""); //æ–°å»ºä¸€ä¸ªcookie
cookie.setMaxAge(24*60*60); //è®¾ç½®cookieçš„æœ‰æ•ˆæœŸ
resp.addCookie(cookie); //å“åº”ç»™å®¢æˆ·ç«¯ä¸€ä¸ªcookie
```

**cookieï¼šä¸€èˆ¬ä¼šä¿å­˜åœ¨æœ¬åœ°çš„ ç”¨æˆ·ç›®å½•ä¸‹ appdataï¼›**

ä¸€ä¸ªç½‘ç«™cookieæ˜¯å¦å­˜åœ¨ä¸Šé™ï¼**èŠèŠç»†èŠ‚é—®é¢˜**

- ä¸€ä¸ªCookieåªèƒ½ä¿å­˜ä¸€ä¸ªä¿¡æ¯ï¼›
- ä¸€ä¸ªwebç«™ç‚¹å¯ä»¥ç»™æµè§ˆå™¨å‘é€å¤šä¸ªcookieï¼Œæœ€å¤šå­˜æ”¾20ä¸ªcookieï¼›
- Cookieå¤§å°æœ‰é™åˆ¶4kbï¼›
- 300ä¸ªcookieæµè§ˆå™¨ä¸Šé™

**åˆ é™¤Cookieï¼›**

- ä¸è®¾ç½®æœ‰æ•ˆæœŸï¼Œå…³é—­æµè§ˆå™¨ï¼Œè‡ªåŠ¨å¤±æ•ˆï¼›
- è®¾ç½®æœ‰æ•ˆæœŸæ—¶é—´ä¸º 0 ï¼›

**ç¼–ç è§£ç ï¼š**

```java
URLEncoder.encode("é²ç­","utf-8") //ç¼–ç 
URLDecoder.decode(cookie.getValue(),"UTF-8")//è§£ç 
```

### 7.4ã€Sessionï¼ˆé‡ç‚¹ï¼‰

![Session](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231059539-451942111.png)

ä»€ä¹ˆæ˜¯Sessionï¼š

- æœåŠ¡å™¨ä¼šç»™æ¯ä¸€ä¸ªç”¨æˆ·ï¼ˆæµè§ˆå™¨ï¼‰åˆ›å»ºä¸€ä¸ªSeesionå¯¹è±¡ï¼›
- ä¸€ä¸ªSeesionç‹¬å ä¸€ä¸ªæµè§ˆå™¨ï¼Œåªè¦æµè§ˆå™¨æ²¡æœ‰å…³é—­ï¼Œè¿™ä¸ªSessionå°±å­˜åœ¨ï¼›
- ç”¨æˆ·ç™»å½•ä¹‹åï¼Œæ•´ä¸ªç½‘ç«™å®ƒéƒ½å¯ä»¥è®¿é—®ï¼â€“> ä¿å­˜ç”¨æˆ·çš„ä¿¡æ¯ï¼›ä¿å­˜è´­ç‰©è½¦çš„ä¿¡æ¯â€¦â€¦

Sessionå’Œcookieçš„åŒºåˆ«ï¼š

- Cookieæ˜¯æŠŠç”¨æˆ·çš„æ•°æ®å†™ç»™ç”¨æˆ·çš„æµè§ˆå™¨ï¼Œæµè§ˆå™¨ä¿å­˜ ï¼ˆå¯ä»¥ä¿å­˜å¤šä¸ªï¼‰
- SessionæŠŠç”¨æˆ·çš„æ•°æ®å†™åˆ°ç”¨æˆ·ç‹¬å Sessionä¸­ï¼ŒæœåŠ¡å™¨ç«¯ä¿å­˜ ï¼ˆä¿å­˜é‡è¦çš„ä¿¡æ¯ï¼Œå‡å°‘æœåŠ¡å™¨èµ„æºçš„æµªè´¹ï¼‰
- Sessionå¯¹è±¡ç”±æœåŠ¡åˆ›å»ºï¼›

ä½¿ç”¨åœºæ™¯ï¼š

- ä¿å­˜ä¸€ä¸ªç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ï¼›
- è´­ç‰©è½¦ä¿¡æ¯ï¼›
- åœ¨æ•´ä¸ªç½‘ç«™ä¸­ç»å¸¸ä¼šä½¿ç”¨çš„æ•°æ®ï¼Œæˆ‘ä»¬å°†å®ƒä¿å­˜åœ¨Sessionä¸­ï¼›

ä½¿ç”¨Sessionï¼š

```java
package com.shen.servlet;

import com.shen.pojo.Person;

import javax.servlet.ServletException;
import javax.servlet.http.*;
import java.io.IOException;

public class SessionDemo01 extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        
        //è§£å†³ä¹±ç é—®é¢˜
        req.setCharacterEncoding("UTF-8");
        resp.setCharacterEncoding("UTF-8");
        resp.setContentType("text/html;charset=utf-8");
        
        //å¾—åˆ°Session
        HttpSession session = req.getSession();
        //ç»™Sessionä¸­å­˜ä¸œè¥¿
        session.setAttribute("name",new Person("é²ç­",1));
        //è·å–Sessionçš„ID
        String sessionId = session.getId();

        //åˆ¤æ–­Sessionæ˜¯ä¸æ˜¯æ–°åˆ›å»º
        if (session.isNew()){
            resp.getWriter().write("sessionåˆ›å»ºæˆåŠŸ,ID:"+sessionId);
        }else {
            resp.getWriter().write("sessionä»¥åŠåœ¨æœåŠ¡å™¨ä¸­å­˜åœ¨äº†,ID:"+sessionId);
        }

        //Sessionåˆ›å»ºçš„æ—¶å€™åšäº†ä»€ä¹ˆäº‹æƒ…ï¼›
//        Cookie cookie = new Cookie("JSESSIONID",sessionId);
//        resp.addCookie(cookie);

    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
//å¾—åˆ°Session
HttpSession session = req.getSession();

Person person = (Person) session.getAttribute("name");

System.out.println(person.toString());

HttpSession session = req.getSession();
session.removeAttribute("name");
//æ‰‹åŠ¨æ³¨é”€Session
session.invalidate();
```

**ä¼šè¯è‡ªåŠ¨è¿‡æœŸï¼šweb.xmlé…ç½®**

```java
<!--è®¾ç½®Sessioné»˜è®¤çš„å¤±æ•ˆæ—¶é—´-->
<session-config>
    <!--15åˆ†é’ŸåSessionè‡ªåŠ¨å¤±æ•ˆï¼Œä»¥åˆ†é’Ÿä¸ºå•ä½-->
    <session-timeout>15</session-timeout>
</session-config>
```

![session2](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231059199-79485472.png)

## 8ã€JSP

### 8.1ã€ä»€ä¹ˆæ˜¯JSP

Java Server Pages ï¼š JavaæœåŠ¡å™¨ç«¯é¡µé¢ï¼Œä¹Ÿå’ŒServletä¸€æ ·ï¼Œç”¨äºåŠ¨æ€WebæŠ€æœ¯ï¼

æœ€å¤§çš„ç‰¹ç‚¹ï¼š

- å†™JSPå°±åƒåœ¨å†™HTML
- åŒºåˆ«ï¼š
  - HTMLåªç»™ç”¨æˆ·æä¾›é™æ€çš„æ•°æ®
  - JSPé¡µé¢ä¸­å¯ä»¥åµŒå…¥JAVAä»£ç ï¼Œä¸ºç”¨æˆ·æä¾›åŠ¨æ€æ•°æ®ï¼›

### 8.2ã€JSPåŸç†

æ€è·¯ï¼šJSPåˆ°åº•æ€ä¹ˆæ‰§è¡Œçš„ï¼

- ä»£ç å±‚é¢æ²¡æœ‰ä»»ä½•é—®é¢˜

- æœåŠ¡å™¨å†…éƒ¨å·¥ä½œ

  tomcatä¸­æœ‰ä¸€ä¸ªworkç›®å½•ï¼›

  IDEAä¸­ä½¿ç”¨Tomcatçš„ä¼šåœ¨IDEAçš„tomcatä¸­ç”Ÿäº§ä¸€ä¸ªworkç›®å½•

  ![å·¥ä½œç©ºé—´](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231058876-37819801.png)

æˆ‘ç”µè„‘çš„åœ°å€ï¼š

1. å¦‚æœæœªè¿›è¡Œä¿®æ”¹é»˜è®¤è·¯å¾„ï¼Œå¯ä»¥åˆ°ä»¥ä¸‹è·¯å¾„å¯»æ‰¾

```java
C:\Users\<æœºå™¨ç”¨æˆ·å>\.IntelliJIdea2018.1\system\tomcat\é¡¹ç›®å\work\Catalina\localhost\é¡¹ç›®å\org\apache\jsp\
```

1. 2020ç‰ˆæœ¬å¯ä»¥å°è¯•åˆ°æŸ¥æ‰¾

```java
C:\Users\<æœºå™¨ç”¨æˆ·å>\AppData\Local\JetBrains\IntelliJIdea2020.2\tomcat\é¡¹ç›®å
```

![7](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231058688-94320766.png)

**æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œä¸ç®¡è®¿é—®ä»€ä¹ˆèµ„æºï¼Œå…¶å®éƒ½æ˜¯åœ¨è®¿é—®Servletï¼**

JSPæœ€ç»ˆä¹Ÿä¼šè¢«è½¬æ¢æˆä¸ºä¸€ä¸ªJavaç±»ï¼

**JSP æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªServlet**

```java
//åˆå§‹åŒ–
  public void _jspInit() {
      
  }
//é”€æ¯
  public void _jspDestroy() {
  }
//JSPService
  public void _jspService(.HttpServletRequest request,HttpServletResponse response)
```

1. åˆ¤æ–­è¯·æ±‚
2. å†…ç½®ä¸€äº›å¯¹è±¡

```java
final javax.servlet.jsp.PageContext pageContext;  //é¡µé¢ä¸Šä¸‹æ–‡
javax.servlet.http.HttpSession session = null;    //session
final javax.servlet.ServletContext application;   //applicationContext
final javax.servlet.ServletConfig config;         //config
javax.servlet.jsp.JspWriter out = null;           //out
final java.lang.Object page = this;               //pageï¼šå½“å‰
HttpServletRequest request                        //è¯·æ±‚
HttpServletResponse response                      //å“åº”
```

1. è¾“å‡ºé¡µé¢å‰å¢åŠ çš„ä»£ç 

```java
response.setContentType("text/html");       //è®¾ç½®å“åº”çš„é¡µé¢ç±»å‹
pageContext = _jspxFactory.getPageContext(this, request, response,
       null, true, 8192, true);
_jspx_page_context = pageContext;
application = pageContext.getServletContext();
config = pageContext.getServletConfig();
session = pageContext.getSession();
out = pageContext.getOut();
_jspx_out = out;
```

1. ä»¥ä¸Šçš„è¿™äº›ä¸ªå¯¹è±¡æˆ‘ä»¬å¯ä»¥åœ¨JSPé¡µé¢ä¸­ç›´æ¥ä½¿ç”¨ï¼

![JSP](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231058410-1060139272.png)

åœ¨JSPé¡µé¢ä¸­ï¼›

åªè¦æ˜¯ JAVAä»£ç å°±ä¼šåŸå°ä¸åŠ¨çš„è¾“å‡ºï¼›

å¦‚æœæ˜¯HTMLä»£ç ï¼Œå°±ä¼šè¢«è½¬æ¢ä¸ºï¼š

```java
out.write("<html>\r\n");
```

è¿™æ ·çš„æ ¼å¼ï¼Œè¾“å‡ºåˆ°å‰ç«¯ï¼

### 8.3ã€JSPåŸºç¡€è¯­æ³•

ä»»ä½•è¯­è¨€éƒ½æœ‰è‡ªå·±çš„è¯­æ³•ï¼ŒJAVAä¸­æœ‰,ã€‚ JSP ä½œä¸ºjavaæŠ€æœ¯çš„ä¸€ç§åº”ç”¨ï¼Œå®ƒæ‹¥æœ‰ä¸€äº›è‡ªå·±æ‰©å……çš„è¯­æ³•ï¼ˆäº†è§£ï¼ŒçŸ¥é“å³å¯ï¼ï¼‰ï¼ŒJavaæ‰€æœ‰è¯­æ³•éƒ½æ”¯æŒï¼

#### JSPè¡¨è¾¾å¼ <%= %>

```java
<%--JSPè¡¨è¾¾å¼
    ä½œç”¨ï¼šç”¨æ¥å°†ç¨‹åºçš„è¾“å‡ºï¼Œè¾“å‡ºåˆ°å®¢æˆ·ç«¯
    <%= å˜é‡æˆ–è€…è¡¨è¾¾å¼%>
--%>
<%= new java.util.Date()%>
```

#### jspè„šæœ¬ç‰‡æ®µ <% %>

```java
  <%--jspè„šæœ¬ç‰‡æ®µ--%>
  <%
    int sum = 0;
    for (int i = 1; i <=100 ; i++) {
      sum+=i;
    }
    out.println("<h1>Sum="+sum+"</h1>");
  %>
```

**è„šæœ¬ç‰‡æ®µçš„å†å®ç°**

```java
<%
    int x=10;
    out.print(x);
%>
<p>è¿™æ˜¯ä¸€ä¸ªJSPæ–‡æ¡£</p>
<%
    int y=20;
    out.print(y);
%>
<hr>

<%--åœ¨ä»£ç åµŒå…¥HTMLå…ƒç´ --%>
<%
    for (int i = 0; i < 5; i++) {
%>
    <h1>Hello,World<%= i%></h1>
<%
    }
%>
```

#### JSPå£°æ˜ <%! %>

```java
<%--ç›¸å½“äºå®šä¹‰çš„å˜é‡æˆ–æ–¹æ³•éƒ½å±äºå…¨å±€--%>
<%!
    static {
        System.out.println("Loading Servletï¼");
    }
    private int globalVar = 0;

    public void shen(){
        System.out.println("è¿›å…¥äº†æ–¹æ³•shen");
    }

%>
```

JSPå£°æ˜ï¼šä¼šè¢«ç¼–è¯‘åˆ°JSPç”ŸæˆJavaçš„ç±»ä¸­ï¼å…¶ä»–çš„ï¼Œå°±ä¼šè¢«ç”Ÿæˆåˆ°_jspServiceæ–¹æ³•ä¸­ï¼

åœ¨JSPï¼ŒåµŒå…¥Javaä»£ç å³å¯ï¼

#### æ³¨é‡Š

```java
<%--æˆ‘æ˜¯JSPæ³¨é‡Š--%>
<!--æˆ‘æ˜¯HTMLæ³¨é‡Š-->
//  æˆ‘æ˜¯Javaæ³¨é‡Š
```

JSPçš„æ³¨é‡Šï¼Œä¸ä¼šåœ¨å®¢æˆ·ç«¯æ˜¾ç¤ºï¼ŒHTMLå°±ä¼šï¼

### 8.4ã€JSPæŒ‡ä»¤

```java
//å®šåˆ¶æŠ¥é”™é¡µé¢ä¿¡æ¯
<%@page args... %>
<%@page errorPage="error/500.jsp" %>  <%--å®šåˆ¶é”™è¯¯é¡µé¢,é…ç½®äº†å°±å¯ä»¥ä¸éœ€è¦é…è¿™ä¸ªäº†--%>
<%@page isErrorPage="true" %>    <%--æ˜¾ç¤ºçš„å£°æ˜è¿™æ˜¯ä¸€ä¸ªé”™è¯¯é¡µé¢--%>
<%@page pageEncoding="UTF-8" %>		<%--è§£å†³ä¹±ç --%>
   
    
//æ‹¼æ¥é¡µé¢
<%@include file="..."%>
<%--<%@include ä¼šå°†ä¸¤ä¸ªé¡µé¢åˆäºŒä¸ºä¸€ "%>--%>
<%@include file="common/header.jsp"%>
<h1>ç½‘é¡µä¸»é¢˜</h1>
<%@include file="common/footer.jsp"%>
    
<hr>
    
<%--jspæ ‡ç­¾(æ¨èä½¿ç”¨è¿™ä¸ª)
jsp:includeï¼šæ‹¼æ¥é¡µé¢ï¼Œæœ¬è´¨è¿˜æ˜¯ä¸‰ä¸ª
--%>
<jsp:include page="/common/header.jsp"/>
<h1>ç½‘é¡µä¸»é¢˜</h1>
<jsp:include page="/common/footer.jsp"/>
    
//å¼•å…¥æ ‡ç­¾åº“
<%@ taglib prefix="..." %>
<%--å¼•å…¥JSTLæ ¸å¿ƒæ ‡ç­¾åº“ï¼Œæˆ‘ä»¬æ‰èƒ½ä½¿ç”¨JSTLæ ‡ç­¾--%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
```

### 8.5ã€9å¤§å†…ç½®å¯¹è±¡

- PageContext å­˜ä¸œè¥¿
- Request å­˜ä¸œè¥¿
- Response
- Session å­˜ä¸œè¥¿
- Application ã€SerlvetContextã€‘ å­˜ä¸œè¥¿
- config ã€SerlvetConfigã€‘
- out
- page ï¼Œä¸ç”¨äº†è§£
- exception

##### æ•°æ®ä½œç”¨åŸŸï¼š

```java
pageContext.setAttribute("name1","é²ç­1å·"); //ä¿å­˜çš„æ•°æ®åªåœ¨ä¸€ä¸ªé¡µé¢ä¸­æœ‰æ•ˆ
request.setAttribute("name2","é²ç­2å·"); //ä¿å­˜çš„æ•°æ®åªåœ¨ä¸€æ¬¡è¯·æ±‚ä¸­æœ‰æ•ˆï¼Œè¯·æ±‚è½¬å‘ä¼šæºå¸¦è¿™ä¸ªæ•°æ®
session.setAttribute("name3","é²ç­3å·"); //ä¿å­˜çš„æ•°æ®åªåœ¨ä¸€æ¬¡ä¼šè¯ä¸­æœ‰æ•ˆï¼Œä»æ‰“å¼€æµè§ˆå™¨åˆ°å…³é—­æµè§ˆå™¨
application.setAttribute("name4","é²ç­4å·");  //ä¿å­˜çš„æ•°æ®åªåœ¨æœåŠ¡å™¨ä¸­æœ‰æ•ˆï¼Œä»æ‰“å¼€æœåŠ¡å™¨åˆ°å…³é—­æœåŠ¡å™¨
```

![8](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231058127-2140621803.png)

requestï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œäº§ç”Ÿçš„æ•°æ®ï¼Œç”¨æˆ·çœ‹å®Œå°±æ²¡ç”¨äº†ï¼Œæ¯”å¦‚ï¼šæ–°é—»ï¼Œç”¨æˆ·çœ‹å®Œæ²¡ç”¨çš„ï¼

sessionï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œäº§ç”Ÿçš„æ•°æ®ï¼Œç”¨æˆ·ç”¨å®Œä¸€ä¼šè¿˜æœ‰ç”¨ï¼Œæ¯”å¦‚ï¼šè´­ç‰©è½¦ï¼›

applicationï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œäº§ç”Ÿçš„æ•°æ®ï¼Œä¸€ä¸ªç”¨æˆ·ç”¨å®Œäº†ï¼Œå…¶ä»–ç”¨æˆ·è¿˜å¯èƒ½ä½¿ç”¨ï¼Œæ¯”å¦‚ï¼šèŠå¤©æ•°æ®ï¼›

å°çŸ¥è¯†1

```java
<%-- pageContextä¹Ÿå¯ä»¥å˜æˆsessionçš„ä½œç”¨åŸŸï¼Œä½†ä¸æ¨è --%>
<%
    pageContext.setAttribute("hello","hello",PageContext.SESSION_SCOPE);
    //ä¸Šé¢è¿™ä¸€å¥ç›¸å½“äºä¸‹é¢è¿™ä¸€å¥
    session.setAttribute("hello","hello");
%>
```

å°çŸ¥è¯†2

```java
<%
<%--ä¸¤ç§æ–¹å¼ç›¸åŒï¼Œåœ¨å‰ç«¯æ¨èç¬¬ä¸€ç§--%>
    pageContext.forward("/index.jsp");
	request.getRequestDispatcher("/index.jsp").forward(request,response);
%>
```

### 8.6ã€JSPæ ‡ç­¾ã€JSTLæ ‡ç­¾ã€ELè¡¨è¾¾å¼

```java
<!-- JSTLè¡¨è¾¾å¼çš„ä¾èµ– -->
<dependency>
    <groupId>javax.servlet.jsp.jstl</groupId>
    <artifactId>jstl-api</artifactId>
    <version>1.2</version>
</dependency>
<!-- standardæ ‡ç­¾åº“ -->
<dependency>
    <groupId>taglibs</groupId>
    <artifactId>standard</artifactId>
    <version>1.1.2</version>
</dependency>
```

ELè¡¨è¾¾å¼ï¼š ${ }

- **è·å–æ•°æ®**
- **æ‰§è¡Œè¿ç®—**
- **è·å–webå¼€å‘çš„å¸¸ç”¨å¯¹è±¡**

**JSPæ ‡ç­¾**

```java
<%-- <jsp:include page=""/>
ä½œç”¨ï¼šæ‹¼æ¥é¡µé¢
--%>

<%--
http://localhost:8080/jsptag1.jsp?name=hyd&age=20
--%>
<%--jsp:forward å¯ä»¥å†™å…¥æ•°æ®--%>
<jsp:forward page="/jsptag2.jsp">
    <jsp:param name="name" value="hyd"/>
    <jsp:param name="age" value="20"/>
</jsp:forward>
```

**JSTLè¡¨è¾¾å¼**

JSTLæ ‡ç­¾åº“çš„ä½¿ç”¨å°±æ˜¯ä¸ºäº†å¼¥è¡¥HTMLæ ‡ç­¾çš„ä¸è¶³ï¼›å®ƒè‡ªå®šä¹‰è®¸å¤šæ ‡ç­¾ï¼Œå¯ä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œæ ‡ç­¾çš„åŠŸèƒ½å’ŒJavaä»£ç ä¸€æ ·ï¼

**æ ¼å¼åŒ–æ ‡ç­¾**

**SQLæ ‡ç­¾**

**XML æ ‡ç­¾**

**æ ¸å¿ƒæ ‡ç­¾** ï¼ˆæŒæ¡éƒ¨åˆ†ï¼‰

![9](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231057808-572932659.png)

**JSTLæ ‡ç­¾åº“ä½¿ç”¨æ­¥éª¤**

- å¼•å…¥å¯¹åº”çš„ taglib
- ä½¿ç”¨å…¶ä¸­çš„æ–¹æ³•
- **åœ¨Tomcat ä¹Ÿéœ€è¦å¼•å…¥ jstlçš„åŒ…ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼šJSTLè§£æé”™è¯¯**ï¼Œ**è§£å†³æ–¹æ³•ï¼šåœ¨Tomcat libç›®å½•å¯¼å…¥standard-1.1.2.jarå’Œjstl-api-1.2.jarçš„jaråŒ…**

##### **c: if**

```java
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%--å¼•å…¥JSTLæ ¸å¿ƒæ ‡ç­¾åº“ï¼Œæˆ‘ä»¬æ‰èƒ½ä½¿ç”¨JSTLæ ‡ç­¾--%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<html>
<head>
    <title>Title</title>
</head>
<body>
<h4>ifæµ‹è¯•</h4>
<hr>
<form action="" method="get">
<%--
ELè¡¨è¾¾å¼è·å–è¡¨å•ä¸­çš„æ•°æ®
${param.å‚æ•°å}
--%>
    <input type="text" name="username" value="${param.username}">
    <input type="submit" value="ç™»å½•">

</form>
<%--åˆ¤æ–­å¦‚æœæäº¤çš„ç”¨æˆ·åæ˜¯ç®¡ç†å‘˜ï¼Œåˆ™ç™»å½•æˆåŠŸ--%>
<c:if test="${param.username=='admin'}" var="isAdmin">
    <c:out value="ç®¡ç†å‘˜æ¬¢è¿æ‚¨ï¼" />

</c:if>
<%--è‡ªé—­åˆæ ‡ç­¾--%>
<c:out value="${isAdmin}" />
</body>
</html>
```

**c:choose c:when**

```java
<body>

<%--å®šä¹‰ä¸€ä¸ªå˜é‡scoreï¼Œå€¼ä¸º85--%>
<c:set var="score" value="55"/>

<c:choose>
    <c:when test="${score>=90}">
        ä½ çš„æˆç»©ä¸ºä¼˜ç§€
    </c:when>
    <c:when test="${score>=80}">
        ä½ çš„æˆç»©ä¸ºä¸€èˆ¬
    </c:when>
    <c:when test="${score>=70}">
        ä½ çš„æˆç»©ä¸ºè‰¯å¥½
    </c:when>
    <c:when test="${score<=60}">
        ä½ çš„æˆç»©ä¸ºä¸åŠæ ¼
    </c:when>
</c:choose>

</body>
```

**c:forEach**

```java
<body>
<%
    ArrayList<String> people = new ArrayList<>();
    people.add(0,"å¼ ä¸‰");
    people.add(1,"æå››");
    people.add(2,"ç‹äº”");
    people.add(3,"èµµå…­");
    people.add(4,"ç”°å…­");
    request.setAttribute("list",people);
%>
<%--
var , æ¯ä¸€æ¬¡éå†å‡ºæ¥çš„å˜é‡
items, è¦éå†çš„å¯¹è±¡
begin,   å“ªé‡Œå¼€å§‹
end,     åˆ°å“ªé‡Œ
step,   æ­¥é•¿
--%>
<c:forEach var="people" items="${list}">
    <c:out value="${people}"/> <br>
</c:forEach>

<hr>

<c:forEach var="people" items="${list}" begin="1" end="3" step="1" >
    <c:out value="${people}"/> <br>
</c:forEach>
</body>
```

## 9ã€JavaBean

å®ä½“ç±»

JavaBeanæœ‰ç‰¹å®šçš„å†™æ³•ï¼š

- å¿…é¡»è¦æœ‰ä¸€ä¸ªæ— å‚æ„é€ 
- å±æ€§å¿…é¡»ç§æœ‰åŒ–
- å¿…é¡»æœ‰å¯¹åº”çš„get/setæ–¹æ³•ï¼›

ä¸€èˆ¬ç”¨æ¥å’Œæ•°æ®åº“çš„å­—æ®µåšæ˜ å°„ ORMï¼›

ORM ï¼šå¯¹è±¡å…³ç³»æ˜ å°„

- è¡¨â€”>ç±»
- å­—æ®µâ€“>å±æ€§
- è¡Œè®°å½•---->å¯¹è±¡

**peopleè¡¨**

| id   | name    | age  | address  |
| ---- | ------- | ---- | -------- |
| 1    | é²ç­1å· | 20   | è¥¿å®‰     |
| 2    | é²ç­2å· | 18   | åŒ—ä¸Šå¹¿   |
| 3    | é²ç­3å· | 19   | å¹¿ä¸œæ·±åœ³ |

```cpp
class People{
    private int id;
    private String name;
    private int age;
    private String address;
}
//ä½¿ç”¨çš„æ—¶å€™newä¸€ä¸‹å¯¹è±¡å°±å¯ä»¥äº†
class A{
    new People(1,"é²ç­1å·",3ï¼Œ"è¥¿å®‰");
    new People(2,"é²ç­2å·",3ï¼Œ"åŒ—ä¸Šå¹¿");
    new People(3,"é²ç­3å·",3ï¼Œ"å¹¿ä¸œæ·±åœ³");
}
```

ç»ƒä¹ ï¼š

å®ä½“ç±»

```java
package com.shem.entity;

//å®ä½“ç±»ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ˜¯å’Œæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ä¸€ä¸€å¯¹åº”ï¼
public class People {
    private int id;
    private String name;
    private int age;
    private String address;
    
    public People(int id, String name, int age, String address) {
        this.id = id;
        this.name = name;
        this.age = age;
        this.address = address;
    }
    public People() {
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    @Override
    public String toString() {
        return "People{" +
                "id=" + id +
                ", name='" + name + '\'' +
                ", age=" + age +
                ", address='" + address + '\'' +
                '}';
    }
}

æŠ˜å  
```

javabean.jsp

```java
<%@ page import="com.shem.entity.People" %>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>Title</title>
</head>
<body>

<%
//    People people = new People();
//    people.setId(1);
//    people.setName("å¼ ä¸‰");
//    people.setAge(19);
//    people.setAddress("å¹¿è¥¿");
%>
<jsp:useBean id="people" class="com.shem.entity.People" scope="page"/>
<jsp:setProperty name="people" property="address" value="å¹¿è¥¿"/>
<jsp:setProperty name="people" property="id" value="1"/>
<jsp:setProperty name="people" property="age" value="19"/>
<jsp:setProperty name="people" property="name" value="å¼ ä¸‰"/>

å§“åï¼š<jsp:getProperty name="people" property="name"/>
idï¼š<jsp:getProperty name="people" property="id"/>
å¹´é¾„ï¼š<jsp:getProperty name="people" property="age"/>
åœ°å€ï¼š<jsp:getProperty name="people" property="address"/>
</body>
</html>
```

## 10ã€MVCä¸‰å±‚æ¶æ„

- ä»€ä¹ˆæ˜¯MVCï¼š Model view Controller æ¨¡å‹ã€è§†å›¾ã€æ§åˆ¶å™¨

### 10.1ã€ä»¥å‰çš„æ¶æ„

![mvc1](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231057475-2104784461.png)

ç”¨æˆ·ç›´æ¥è®¿é—®æ§åˆ¶å±‚ï¼Œæ§åˆ¶å±‚å°±å¯ä»¥ç›´æ¥æ“ä½œæ•°æ®åº“ï¼›

```java
servlet--CRUD-->æ•°æ®åº“
å¼Šç«¯ï¼šç¨‹åºååˆ†è‡ƒè‚¿ï¼Œä¸åˆ©äºç»´æŠ¤  
servletçš„ä»£ç ä¸­ï¼šå¤„ç†è¯·æ±‚ã€å“åº”ã€è§†å›¾è·³è½¬ã€å¤„ç†JDBCã€å¤„ç†ä¸šåŠ¡ä»£ç ã€å¤„ç†é€»è¾‘ä»£ç 

æ¶æ„ï¼šæ²¡æœ‰ä»€ä¹ˆæ˜¯åŠ ä¸€å±‚è§£å†³ä¸äº†çš„ï¼
ç¨‹åºçŒ¿è°ƒç”¨
â†‘
JDBC ï¼ˆå®ç°è¯¥æ¥å£ï¼‰
â†‘
Mysql Oracle SqlServer ....ï¼ˆä¸åŒå‚å•†ï¼‰
```

### 10.2ã€MVCä¸‰å±‚æ¶æ„

![mvc2](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231056966-350016665.png)

Model

- ä¸šåŠ¡å¤„ç† ï¼šä¸šåŠ¡é€»è¾‘ï¼ˆServiceï¼‰
- æ•°æ®æŒä¹…å±‚ï¼šCRUD ï¼ˆDao - æ•°æ®æŒä¹…åŒ–å¯¹è±¡ï¼‰

View

- å±•ç¤ºæ•°æ®
- æä¾›é“¾æ¥å‘èµ·Servletè¯·æ±‚ ï¼ˆaï¼Œformï¼Œimgâ€¦ï¼‰

Controller ï¼ˆServletï¼‰

- æ¥æ”¶ç”¨æˆ·çš„è¯·æ±‚ ï¼šï¼ˆreqï¼šè¯·æ±‚å‚æ•°ã€Sessionä¿¡æ¯â€¦.ï¼‰
- äº¤ç»™ä¸šåŠ¡å±‚å¤„ç†å¯¹åº”çš„ä»£ç 
- æ§åˆ¶è§†å›¾çš„è·³è½¬

```java
ç™»å½•--->æ¥æ”¶ç”¨æˆ·çš„ç™»å½•è¯·æ±‚--->å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼ˆè·å–ç”¨æˆ·ç™»å½•çš„å‚æ•°ï¼Œusernameï¼Œpasswordï¼‰---->äº¤ç»™ä¸šåŠ¡å±‚å¤„ç†ç™»å½•ä¸šåŠ¡ï¼ˆåˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®ï¼šäº‹åŠ¡ï¼‰--->Daoå±‚æŸ¥è¯¢ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®-->æ•°æ®åº“
```

## 11ã€Filter ï¼ˆé‡ç‚¹ï¼‰

æ¯”å¦‚ Shiroå®‰å…¨æ¡†æ¶æŠ€æœ¯å°±æ˜¯ç”¨Filteræ¥å®ç°çš„

Filterï¼šè¿‡æ»¤å™¨ ï¼Œç”¨æ¥è¿‡æ»¤ç½‘ç«™çš„æ•°æ®ï¼›

- å¤„ç†ä¸­æ–‡ä¹±ç 
- ç™»å½•éªŒè¯â€¦.

ï¼ˆæ¯”å¦‚ç”¨æ¥è¿‡æ»¤ç½‘ä¸Šéª‚äººçš„è¯ï¼Œæˆ‘***æˆ‘è‡ªå·± 0-0ï¼‰

![10](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231056623-402351679.png)

Filterå¼€å‘æ­¥éª¤ï¼š

1. å¯¼åŒ…
2. ç¼–å†™è¿‡æ»¤å™¨
   1. å¯¼åŒ…ä¸è¦é”™ **ï¼ˆæ³¨æ„ï¼‰**

![12](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231056336-1254848072.png)

å®ç°Filteræ¥å£ï¼Œé‡å†™å¯¹åº”çš„æ–¹æ³•å³å¯ğŸ˜

```java
package com.shen.filter;

import javax.servlet.*;
import java.io.IOException;

public class CharacterEncodingFilter implements Filter {
    //åˆå§‹åŒ–:webæœåŠ¡å™¨å¯åŠ¨ï¼Œå°±å·²ç»åˆå§‹åŒ–äº†ï¼Œéšæ—¶ç­‰å¾…è¿‡æ»¤å¯¹è±¡å‡ºç°ï¼
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        System.out.println("CharacterEncodingFilteråˆå§‹åŒ–");
    }
    //chain :é“¾
    /*
    1.è¿‡æ»¤å™¨ä¸­æ‰€æœ‰ä»£ç ï¼Œåœ¨è¿‡æ»¤ç‰¹å®šè¯·æ±‚çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œ
    2.å¿…é¡»è¦è®©è¿‡æ»¤å™¨ç»§ç»­åŒè¡Œ
     */
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException {
        request.setCharacterEncoding("utf-8");
        response.setCharacterEncoding("utf-8");
        response.setContentType("text/html;charset=UTF-8");

        System.out.println("CharacterEncodingFilteræ‰§è¡Œå‰....");
        filterChain.doFilter(request,response);//è®©æˆ‘ä»¬çš„è¯·æ±‚ç»§ç»­èµ°ï¼Œå¦‚æœä¸å†™ï¼Œç¨‹åºåˆ°è¿™é‡Œå°±è¢«æ‹¦æˆªåœæ­¢äº†
        System.out.println("CharacterEncodingFilteræ‰§è¡Œå....");
    }
    //é”€æ¯ï¼šwebæœåŠ¡å™¨å…³é—­çš„æ—¶å€™ï¼Œè¿‡æ»¤å™¨ä¼šè¢«é”€æ¯
    @Override
    public void destroy() {
        System.out.println("CharacterEncodingFilteré”€æ¯");
    }
}
```

1. åœ¨web.xmlä¸­é…ç½® Filter

```java
    <filter>
        <filter-name>CharacterEncodingFilter</filter-name>
        <filter-class>com.shen.filter.CharacterEncodingFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>CharacterEncodingFilter</filter-name>
        <!--åªè¦æ˜¯servletçš„ä»»ä½•è¯·æ±‚ï¼Œä¼šç»è¿‡è¿™ä¸ªè¿‡æ»¤å™¨-->
        <url-pattern>/servlet/*</url-pattern>
        <!--<url-pattern>/*</url-pattern>-->
    </filter-mapping>
```

## 12ã€ç›‘å¬å™¨

å®ç°ä¸€ä¸ªç›‘å¬å™¨çš„æ¥å£ï¼›ï¼ˆæœ‰nç§ç›‘å¬å™¨ï¼‰

1. ç¼–å†™ä¸€ä¸ªç›‘å¬å™¨

   å®ç°ç›‘å¬å™¨çš„æ¥å£â€¦

```java
package com.shen.listener;

import javax.servlet.ServletContext;
import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;

//ç»Ÿè®¡ç½‘ç«™åœ¨çº¿äººæ•°ï¼šç»Ÿè®¡session
public class OnlineCountListener implements HttpSessionListener {
    //åˆ›å»ºsessionç›‘å¬:çœ‹ä½ çš„ä¸€ä¸¾ä¸€åŠ¨
    //ä¸€æ—¦åˆ›å»ºsessionå°±ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼
    @Override
    public void sessionCreated(HttpSessionEvent se) {
        System.out.println(se.getSession().getId());
        ServletContext ctx = se.getSession().getServletContext();
        Integer onlineCount = (Integer) ctx.getAttribute("OnlineCount");
        if (onlineCount==null){
            onlineCount=new Integer(1);
        }else{
            int count = onlineCount.intValue();
            onlineCount = new Integer(count+1);
        }
        ctx.setAttribute("OnlineCount",onlineCount);
    }
    //é”€æ¯sessionç›‘å¬
    //ä¸€æ—¦é”€æ¯sessionå°±ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼
    @Override
    public void sessionDestroyed(HttpSessionEvent se) {
        ServletContext ctx = se.getSession().getServletContext();
        Integer onlineCount = (Integer) ctx.getAttribute("OnlineCount");
        if (onlineCount==null){
            onlineCount=new Integer(0);
        }else{
            int count = onlineCount.intValue();
            onlineCount = new Integer(count-1);
        }
        ctx.setAttribute("OnlineCount",onlineCount);
    }
    /*
    Sessioné”€æ¯ï¼š
    1. æ‰‹åŠ¨é”€æ¯     getSession().invalidate();
    2. è‡ªåŠ¨é”€æ¯
    */
}
```

1. web.xmlä¸­æ³¨å†Œç›‘å¬å™¨

```java
    <!--æ³¨å†Œç›‘å¬å™¨-->
    <listener>
        <listener-class>com.shen.listener.OnlineCountListener</listener-class>
    </listener>
```

1. çœ‹æƒ…å†µæ˜¯å¦ä½¿ç”¨ï¼

## 13ã€è¿‡æ»¤å™¨ã€ç›‘å¬å™¨å¸¸è§åº”ç”¨

**ç›‘å¬å™¨ï¼šGUIç¼–ç¨‹ä¸­ç»å¸¸ä½¿ç”¨ï¼›**

```java
package com.shen.listener;

import java.awt.*;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

public class TestPanel {
    public static void main(String[] args) {
        Frame frame = new Frame("ä¸­ç§‹èŠ‚å¿«ä¹"); //æ–°å»ºä¸€ä¸ªçª—ä½“
        Panel panel = new Panel(null); //é¢æ¿
        frame.setLayout(null);//è®¾ç½®çª—ä½“çš„å¸ƒå±€

        frame.setBounds(300,300,500,500);
        frame.setBackground(new Color(0,0,255));//è®¾ç½®èƒŒæ™¯é¢œè‰²
        panel.setBounds(50,50,300,300);
        panel.setBackground(new Color(0,255,0));//è®¾ç½®èƒŒæ™¯é¢œè‰²
        frame.add(panel);

        frame.setVisible(true);

        //ç›‘å¬äº‹ä»¶ï¼šç›‘å¬å…³é—­äº‹ä»¶
        frame.addWindowListener(new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
    }
}
```

#### Filterè¿‡æ»¤å™¨å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½ğŸ˜€

ç”¨æˆ·ç™»å½•ä¹‹åæ‰èƒ½è¿›å…¥ä¸»é¡µï¼ç”¨æˆ·æ³¨é”€åå°±ä¸èƒ½è¿›å…¥ä¸»é¡µäº†ï¼

1. ç”¨æˆ·ç™»å½•ä¹‹åï¼Œå‘Sesisonä¸­æ”¾å…¥ç”¨æˆ·çš„æ•°æ®
2. è¿›å…¥ä¸»é¡µçš„æ—¶å€™è¦åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç»ç™»å½•ï¼›è¦æ±‚ï¼šåœ¨è¿‡æ»¤å™¨ä¸­å®ç°ï¼

```java
HttpServletRequest request = (HttpServletRequest) req;
HttpServletResponse response = (HttpServletResponse) resp;

if (request.getSession().getAttribute(Constant.USER_SESSION)==null){
    response.sendRedirect("/error.jsp");
}

chain.doFilter(request,response);
```

##### **ç»ƒä¹ ç™»å½•åŠŸèƒ½ï¼š**

ç™»å½•ç•Œé¢login.jspï¼š

```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>Title</title>
</head>
<body>

<h1>ç™»å½•</h1>
<form action="/servlet/login" method="post">
    è´¦å·ï¼š<input type="text" name="username"><br>
    å¯†ç ï¼š<input type="password" name="password"><br>
    <input type="submit" value="ç™»å½•">
</form>
</body>
</html>
```

é”™è¯¯é¡µé¢error.jsp

```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>Title</title>
</head>
<body>
<h1>é”™è¯¯</h1>
<h3>æ²¡æœ‰æƒé™ï¼Œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯</h3>
<a href="/login.jsp">è¿”å›ç™»å½•é¡µé¢</a>
</body>
</html>
```

ä¸»é¡µsuccess.jsp

```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>Title</title>
</head>
<body>
<h1>ä¸»é¡µ</h1>
<p><a href="/servlet/logout">æ³¨é”€</a></p>
</body>
</html>
```

å®šåˆ¶ä¸€ä¸ªutilç±»æ”¾å¸¸é‡ğŸ˜Š

```java
package com.shen.util;
public class Constant {
    public final static String USER_SESSION ="USER_SESSION";
}
```

ç¼–å†™LoginServletæ˜¯å¦èƒ½ç™»å½•

```java
package com.shen.servlet;
import com.shen.util.Constant;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class LoginServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //è·å–å‰æ®µè¯·æ±‚çš„å‚æ•°
        String username = req.getParameter("username");
        String password = req.getParameter("password");
        if (username.equals("admin")&&password.equals("123")){//ç™»å½•æˆåŠŸ
            req.getSession().setAttribute(Constant.USER_SESSION,req.getSession().getId());
            resp.sendRedirect("/sys/success.jsp");
        }else {//ç™»å½•å¤±è´¥
            resp.sendRedirect("/error.jsp");
        }
    }
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
```

ç¼–å†™Logouté€€å‡ºç™»å½•åŠŸèƒ½

```java
package com.shen.servlet;
import com.shen.util.Constant;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class LogoutServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        Object user_session = req.getSession().getAttribute(Constant.USER_SESSION);
        if (user_session!=null){
            req.getSession().removeAttribute(Constant.USER_SESSION);
            resp.sendRedirect("/login.jsp");
        }else {
            resp.sendRedirect("/login.jsp");
        }
    }
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
```

ç¼–å†™è¿‡æ»¤å™¨ï¼Œè®©é‚£äº›æ²¡ç™»å½•å°±è¾“å…¥ç½‘å€çš„ä¹Ÿè¿›ä¸å»ä¸»é¡µé¢

```java
package com.shen.filter;
import com.shen.util.Constant;
import javax.servlet.*;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class SysFilter implements Filter {
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }
    @Override
    public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) throws IOException, ServletException {
    // è¿™é‡Œæ˜¯ServletRequestå–ä¸åˆ°Session,æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯HttpServletRequestå¯ä»¥å–Session,æ‰€ä»¥æˆ‘ä»¬éœ€è¦è½¬ä¸€ä¸‹
        HttpServletRequest request=(HttpServletRequest) req;
        HttpServletResponse response=(HttpServletResponse) resp;
        Object user_session = request.getSession().getAttribute(Constant.USER_SESSION);
        if(user_session==null){
            response.sendRedirect("/error.jsp");
        }
        chain.doFilter(req,resp);
    }
    @Override
    public void destroy() {
    }
}
```

æ³¨å†Œweb.xml,ä¸ªäººå»ºè®®å†™å¥½ä¸€ä¸ªServletå°±å…ˆæ³¨å†Œä¸€ä¸ªweb.xmlï¼Œä¸ç„¶è€æ˜¯å¿˜è®°ğŸ˜‚

```java
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
         version="4.0">
             
    <!--ç™»å½•-->
    <servlet>
        <servlet-name>loginServlet</servlet-name>
        <servlet-class>com.shen.servlet.LoginServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>loginServlet</servlet-name>
        <url-pattern>/servlet/login</url-pattern>
    </servlet-mapping>
    <!--é€€å‡ºç™»å½•-->
    <servlet>
        <servlet-name>logoutServlet</servlet-name>
        <servlet-class>com.shen.servlet.LogoutServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>logoutServlet</servlet-name>
        <url-pattern>/servlet/logout</url-pattern>
    </servlet-mapping>
    <!-- è¿‡æ»¤å™¨-->
    <filter>
        <filter-name>SysFilter</filter-name>
        <filter-class>com.shen.filter.SysFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>SysFilter</filter-name>
        <url-pattern>/sys/*</url-pattern>
    </filter-mapping>
    
    
    </web-app>
```

æˆ‘çš„webç›®å½•æ–‡ä»¶æ˜¯è¿™æ ·ğŸ˜

![14](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231056086-184340382.png)

## 14ã€JDBC

ä»€ä¹ˆæ˜¯JDBC ï¼š Javaè¿æ¥æ•°æ®åº“ï¼

![jdbc01](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231055810-935855758.png)

éœ€è¦jaråŒ…çš„æ”¯æŒï¼š

- java.sql
- javax.sql
- mysql-conneter-javaâ€¦ è¿æ¥é©±åŠ¨ï¼ˆå¿…é¡»è¦å¯¼å…¥ï¼‰

**å®éªŒç¯å¢ƒæ­å»º**

```java
CREATE TABLE users(
    id INT PRIMARY KEY,
    `name` VARCHAR(40),
    `password` VARCHAR(40),
    email VARCHAR(60),
    birthday DATE
);

INSERT INTO users(id,`name`,`password`,email,birthday)
VALUES(1,'å¼ ä¸‰','123','zs@qq.com','2000-01-01');
INSERT INTO users(id,`name`,`password`,email,birthday)
VALUES(2,'æå››','123','ls@qq.com','2000-01-01');
INSERT INTO users(id,`name`,`password`,email,birthday)
VALUES(3,'ç‹äº”','123','ww@qq.com','2000-01-01');

SELECT	* FROM users;
```

å¯¼å…¥æ•°æ®åº“ä¾èµ–

æ³¨æ„ï¼šä¾èµ–è¿™é‡Œå¯èƒ½è¦çœ‹æ•°æ®åº“ç‰ˆæœ¬ï¼Œæˆ‘å­¦ä¹ ä½¿ç”¨5.1.47ä¸€ç›´æŠ¥é”™ï¼Œ**æˆ‘çš„mysqlæ˜¯5.7.36**ï¼Œæˆ‘æ¢äº†5.1.36çš„ä¾èµ–å°±å¯ä»¥è·‘äº†

```java
<!--mysqlçš„é©±åŠ¨-->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.36</version>
</dependency>
```

IDEAä¸­è¿æ¥æ•°æ®åº“ï¼š

![jdbc2](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231055564-1981213979.png)

**JDBC å›ºå®šæ­¥éª¤ï¼š**

1. åŠ è½½é©±åŠ¨
2. è¿æ¥æ•°æ®åº“,ä»£è¡¨æ•°æ®åº“
3. å‘æ•°æ®åº“å‘é€SQLçš„å¯¹è±¡Statement : CRUD
4. ç¼–å†™SQL ï¼ˆæ ¹æ®ä¸šåŠ¡ï¼Œä¸åŒçš„SQLï¼‰
5. æ‰§è¡ŒSQL
6. å…³é—­è¿æ¥ï¼ˆå…ˆå¼€çš„åå…³ï¼‰

**æŸ¥è¯¢ï¼š**

```java
package com.shen.Test;

import java.sql.*;

public class TestJdbc {
    public static void main(String[] args) throws ClassNotFoundException, SQLException {
        //é…ç½®ä¿¡æ¯
        //?useUnicode=true&characterEncoding=utf-8" è§£å†³ä¸­æ–‡ä¹±ç 
        String url="jdbc:mysql://localhost:3306/jdbc?characterEncoding=UTF8&autoReconnect=true";
        String username = "root";
        String password ="123456";

        //1.åŠ è½½é©±åŠ¨
        Class.forName("com.mysql.jdbc.Driver");
        //2.è¿æ¥æ•°æ®åº“,ä»£è¡¨æ•°æ®åº“
            Connection connection = DriverManager.getConnection(url, username, password);
            //3.å‘æ•°æ®åº“å‘é€SQLçš„å¯¹è±¡Statementï¼ŒprepareStatementï¼šCRUD
            Statement statement = connection.createStatement();
            //4.ç¼–å†™SQL
            String sql = "select * from users";
            //5.æ‰§è¡ŒæŸ¥è¯¢SQL,è¿”å›ä¸€ä¸ªResultSetç»“æœé›†
            ResultSet rs = statement.executeQuery(sql);
            while (rs.next()){
                System.out.println("id="+rs.getObject("id"));
                System.out.println("name="+rs.getObject("name"));
                System.out.println("password="+rs.getObject("password"));
                System.out.println("email="+rs.getObject("email"));
                System.out.println("birthday="+rs.getObject("birthday"));
            }
            //6. å…³é—­è¿æ¥ é‡Šæ”¾èµ„æºï¼ˆä¸€å®šè¦åšï¼‰å…ˆå¼€åå…³
            rs.close();
            statement.close();
            connection.close();
    }
}
```

**å¢åˆ æ”¹ï¼š**

```java
package com.shen.Test;

import java.sql.*;

public class TestJdbc2 {
    public static void main(String[] args) throws ClassNotFoundException, SQLException {
        //é…ç½®ä¿¡æ¯
        //?useUnicode=true&characterEncoding=utf-8" è§£å†³ä¸­æ–‡ä¹±ç 
        String url="jdbc:mysql://localhost:3306/jdbc?characterEncoding=UTF8&autoReconnect=true";
        String username = "root";
        String password ="123456";

        //1.åŠ è½½é©±åŠ¨
        Class.forName("com.mysql.jdbc.Driver");
        //2.è¿æ¥æ•°æ®åº“,ä»£è¡¨æ•°æ®åº“
        Connection connection = DriverManager.getConnection(url, username, password);
        //3.å‘æ•°æ®åº“å‘é€SQLçš„å¯¹è±¡Statementï¼šCRUD
        Statement statement = connection.createStatement();
        //4.ç¼–å†™SQL
        //String sql = "INSERT INTO users(id,`name`,`password`,email,birthday)"; //æ·»åŠ 
        //String sql = "UPDATE users SET `name`='ææŸ³é’' WHERE id =1;"; //ä¿®æ”¹
        String sql = "delete from users where id = 3"; //åˆ é™¤
        //5.æ‰§è¡ŒæŸ¥è¯¢SQL,è¿”å›ä¸€ä¸ªResultSetç»“æœé›†

        //å—å½±å“çš„è¡Œæ•°ï¼Œå¢åˆ æ”¹éƒ½ä½¿ç”¨executeUpdateå³å¯
        int i = statement.executeUpdate(sql);

        System.out.println("å—å½±å“çš„è¡Œä¸ºï¼š"+i);

        //6. å…³é—­è¿æ¥ é‡Šæ”¾èµ„æºï¼ˆä¸€å®šè¦åšï¼‰å…ˆå¼€åå…³
        statement.close();
        connection.close();
    }
}
```

**é¢„ç¼–è¯‘SQL**ï¼Œå»ºè®®ä½¿ç”¨è¿™ä¸ª,prepareStatementå¯ä»¥é˜²æ­¢sqlæ³¨å…¥

```java
package com.shen.Test;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.util.Date;

public class TestJdbc3 {
    public static void main(String[] args) throws Exception {
        //é…ç½®ä¿¡æ¯
        //useUnicode=true&characterEncoding=utf-8 è§£å†³ä¸­æ–‡ä¹±ç 
        String url="jdbc:mysql://localhost:3306/jdbc?useUnicode=true&characterEncoding=utf-8";
        String username = "root";
        String password = "123456";

        //1.åŠ è½½é©±åŠ¨
        Class.forName("com.mysql.jdbc.Driver");
        //2.è¿æ¥æ•°æ®åº“,ä»£è¡¨æ•°æ®åº“
        Connection connection = DriverManager.getConnection(url, username, password);

        //3.ç¼–å†™SQL
        String sql = "insert into  users(id, name, password, email, birthday) values (?,?,?,?,?);";

        //4.é¢„ç¼–è¯‘
        PreparedStatement preparedStatement = connection.prepareStatement(sql);

        preparedStatement.setInt(1,7);//ç»™ç¬¬ä¸€ä¸ªå ä½ç¬¦ï¼Ÿ çš„å€¼èµ‹å€¼ä¸º7ï¼›
        preparedStatement.setString(2,"é²ç­ä¸ƒå·");//ç»™ç¬¬äºŒä¸ªå ä½ç¬¦ï¼Ÿ çš„å€¼èµ‹å€¼ä¸ºé²ç­ä¸ƒå·ï¼›
        preparedStatement.setString(3,"999");//ç»™ç¬¬ä¸‰ä¸ªå ä½ç¬¦ï¼Ÿ çš„å€¼èµ‹å€¼ä¸º999ï¼›
        preparedStatement.setString(4,"10086@qq.com");//ç»™ç¬¬å››ä¸ªå ä½ç¬¦ï¼Ÿ çš„å€¼èµ‹å€¼ä¸º10086@qq.comï¼›
        preparedStatement.setDate(5, new java.sql.Date(new Date().getTime()));//ç»™ç¬¬äº”ä¸ªå ä½ç¬¦ï¼Ÿ çš„å€¼èµ‹å€¼ä¸ºnew java.sql.Date(new Date().getTime())ï¼›

        //5.æ‰§è¡ŒSQL
        int i = preparedStatement.executeUpdate();

        if (i>0){
            System.out.println("æ’å…¥æˆåŠŸ");
        }

        //6.å…³é—­è¿æ¥ï¼Œé‡Šæ”¾èµ„æºï¼ˆä¸€å®šè¦åšï¼‰ å…ˆå¼€åå…³
        preparedStatement.close();
        connection.close();
    }
}
```

**äº‹åŠ¡**

è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼

ACIDåŸåˆ™ï¼šä¿è¯æ•°æ®çš„å®‰å…¨ã€‚

```java
å¼€å¯äº‹åŠ¡
äº‹åŠ¡æäº¤  commit()
äº‹åŠ¡å›æ»š  rollback()
å…³é—­äº‹åŠ¡

è½¬è´¦ï¼š
A:1000
B:1000
   
A(900)   --100-->   B(1100) 
```

**Junitå•å…ƒæµ‹è¯•**

ä¾èµ–

```java
<!--å•å…ƒæµ‹è¯•-->
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.12</version>
</dependency>
```

ç®€å•ä½¿ç”¨

@Testæ³¨è§£åªæœ‰åœ¨æ–¹æ³•ä¸Šæœ‰æ•ˆï¼Œåªè¦åŠ äº†è¿™ä¸ªæ³¨è§£çš„æ–¹æ³•ï¼Œå°±å¯ä»¥ç›´æ¥è¿è¡Œäº†

```java
@Test
public void test(){
    System.out.println("Hello");
}
```

æˆåŠŸçš„æ—¶å€™æ˜¯ç»¿è‰²çš„æ‰“é’©

![Jdbc03](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231055360-1998707357.png)

å¤±è´¥çš„æ—¶å€™æ˜¯çº¢è‰²æ„Ÿå¹å·ï¼š

![Jdbc04](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231055025-439032637.png)

**æ­å»ºä¸€ä¸ªç¯å¢ƒ**

```java
CREATE TABLE account(
   id INT PRIMARY KEY AUTO_INCREMENT,
   `name` VARCHAR(40),
   money FLOAT
);

INSERT INTO account(`name`,money) VALUES('A',1000);
INSERT INTO account(`name`,money) VALUES('B',1000);
INSERT INTO account(`name`,money) VALUES('C',1000);
package com.shen.Test;

import org.junit.Test;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class TestJdbc4 {
    @Test
    public void Test(){
        //é…ç½®ä¿¡æ¯
        //?useUnicode=true&characterEncoding=utf-8" è§£å†³ä¸­æ–‡ä¹±ç 
        String url="jdbc:mysql://localhost:3306/jdbc?characterEncoding=UTF8&autoReconnect=true";
        String username = "root";
        String password ="123456";
        Connection connection=null;
        //1.åŠ è½½é©±åŠ¨
        try {
            Class.forName("com.mysql.jdbc.Driver");

            //2.è¿æ¥æ•°æ®åº“,ä»£è¡¨æ•°æ®åº“
            connection = DriverManager.getConnection(url, username, password);
            //3.é€šçŸ¥æ•°æ®åº“å¼€å¯äº‹åŠ¡,falseå¼€å¯
            connection.setAutoCommit(false);
            String sql ="update account set money =money-100 where name='A'";
            connection.prepareStatement(sql).executeUpdate();
            //åˆ¶é€ é”™è¯¯
//            int i =1/0;
            String sql2 ="update account set money =money+100 where name='B'";
            connection.prepareStatement(sql2).executeUpdate();
            connection.commit();//ä»¥ä¸Šä¸¤æ¡SQLéƒ½æ‰§è¡ŒæˆåŠŸäº†ï¼Œå°±æäº¤äº‹åŠ¡ï¼
            System.out.println("success");
        } catch (Exception e) {
            try {
                //å¦‚æœå‡ºç°å¼‚å¸¸ï¼Œå°±é€šçŸ¥æ•°æ®åº“å›æ»šäº‹åŠ¡
                connection.rollback();
            } catch (SQLException throwables) {
                throwables.printStackTrace();
            }
            e.printStackTrace();
        }finally {
            try {
                connection.close();
            } catch (SQLException throwables) {
                throwables.printStackTrace();
            }
        }
    }
}
```

#### **é¢ï¼Œè¿™ä¸ªå¾€ä¸‹å°±æ˜¯æ‹¿é¡¹ç›®æ¥ç»ƒæ‰‹äº†ï¼Œå¯ä»¥æ‰¾ä¸¤ä¸ªé¡¹ç›®æ¥ç»ƒæ‰‹ï¼Œæˆ–è€…è·Ÿç‹‚ç¥è€å¸ˆä¸€èµ·æ•²ä»–çš„SMBMS(è¶…å¸‚è®¢å•ç®¡ç†ç³»ç»Ÿ)**ğŸ˜Š

## 15ã€SMBMS(è¶…å¸‚è®¢å•ç®¡ç†ç³»ç»Ÿ)

![é¡¹ç›®01](https://img2022.cnblogs.com/blog/2467723/202203/2467723-20220329231054651-1195632259.png)

# 16.MD5åŠ å¯†ç®—æ³•

```java
/**
 * Description: MD5åŠ å¯†çš„å…¬å…±æ–¹æ³•ï¼Œä¼ å…¥å¯†ç ï¼Œè¿”å›åŠ å¯†åçš„å¯†ç <br/>
 * @author liYan
 * @param pwd
 * @return
 */
public static String MD5Tools(String pwd) {
    String[] digitals = { "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f" };
    String result = "";
    try {
        MessageDigest md5 = MessageDigest.getInstance("MD5");
        byte[] bytes = md5.digest(pwd.getBytes("utf-8"));
        for (int i = 0; i < bytes.length; i++) {
            int num = bytes[i];
            if (num < 0) {
                num = num + 255;
            }
            int j = num / 16;
            int k = num % 16;
            result = digitals[j] + digitals[k] + result;
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return result;
}
```